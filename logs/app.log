2025-09-29 17:12:01 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-09-29 17:12:01 INFO: [33mPress CTRL+C to quit[0m
2025-09-29 17:12:01 INFO:  * Restarting with watchdog (windowsapi)
2025-09-29 17:12:07 WARNING:  * Debugger is active!
2025-09-29 17:12:07 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:01:51 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-09-30 10:01:51 INFO: [33mPress CTRL+C to quit[0m
2025-09-30 10:01:51 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 10:02:01 WARNING:  * Debugger is active!
2025-09-30 10:02:01 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:03:27 INFO: 127.0.0.1 - - [30/Sep/2025 10:03:27] "GET / HTTP/1.1" 200 -
2025-09-30 10:03:28 INFO: 127.0.0.1 - - [30/Sep/2025 10:03:28] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-09-30 10:14:01 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-09-30 10:14:05 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 10:14:40 WARNING:  * Debugger is active!
2025-09-30 10:14:40 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:14:53 INFO: 127.0.0.1 - - [30/Sep/2025 10:14:53] "GET / HTTP/1.1" 200 -
2025-09-30 10:14:53 INFO: 127.0.0.1 - - [30/Sep/2025 10:14:53] "[33mGET /image.png HTTP/1.1[0m" 404 -
2025-09-30 10:15:00 INFO: New session started: cc4bc5f4-3bc2-4a14-bde3-cff72fea70dd
2025-09-30 10:15:00 INFO: Received request data: {'mobile': '918921729081'}
2025-09-30 10:15:00 INFO: Updated mobile: 918921729081
2025-09-30 10:15:02 INFO: Updated name: MC DONALDS
2025-09-30 10:15:02 INFO: 127.0.0.1 - - [30/Sep/2025 10:15:02] "POST /number HTTP/1.1" 200 -
2025-09-30 10:15:02 INFO: 127.0.0.1 - - [30/Sep/2025 10:15:02] "POST /names HTTP/1.1" 200 -
2025-09-30 10:15:28 INFO: 127.0.0.1 - - [30/Sep/2025 10:15:28] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-09-30 10:18:55 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-09-30 10:18:55 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-09-30 10:18:55 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-09-30 10:18:55 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\openai\\_base_client.py', reloading
2025-09-30 10:18:57 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 10:19:06 WARNING:  * Debugger is active!
2025-09-30 10:19:06 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:19:06 INFO: 127.0.0.1 - - [30/Sep/2025 10:19:06] "GET / HTTP/1.1" 200 -
2025-09-30 10:19:06 INFO: 127.0.0.1 - - [30/Sep/2025 10:19:06] "[33mGET /image.png HTTP/1.1[0m" 404 -
2025-09-30 10:19:06 INFO: 127.0.0.1 - - [30/Sep/2025 10:19:06] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-09-30 10:19:13 INFO: New session started: c0fa4719-cc91-4223-bd88-95f63c9665c4
2025-09-30 10:19:13 INFO: Received request data: {'mobile': '918921729081'}
2025-09-30 10:19:13 INFO: Updated mobile: 918921729081
2025-09-30 10:19:16 INFO: Updated name: MC DONALDS
2025-09-30 10:19:16 INFO: 127.0.0.1 - - [30/Sep/2025 10:19:16] "POST /number HTTP/1.1" 200 -
2025-09-30 10:19:16 INFO: 127.0.0.1 - - [30/Sep/2025 10:19:16] "POST /names HTTP/1.1" 200 -
2025-09-30 10:19:35 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\fields.py', reloading
2025-09-30 10:19:36 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic_core\\__init__.py', reloading
2025-09-30 10:19:37 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 10:19:45 WARNING:  * Debugger is active!
2025-09-30 10:19:45 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:22:06 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\openai\\_types.py', reloading
2025-09-30 10:22:08 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 10:22:20 WARNING:  * Debugger is active!
2025-09-30 10:22:20 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:23:21 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-09-30 10:23:21 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-09-30 10:23:22 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 10:23:31 WARNING:  * Debugger is active!
2025-09-30 10:23:31 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:24:26 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-09-30 10:24:26 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-09-30 10:24:27 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 10:24:35 WARNING:  * Debugger is active!
2025-09-30 10:24:35 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:24:36 INFO: 127.0.0.1 - - [30/Sep/2025 10:24:36] "GET / HTTP/1.1" 200 -
2025-09-30 10:24:36 INFO: 127.0.0.1 - - [30/Sep/2025 10:24:36] "[33mGET /image.png HTTP/1.1[0m" 404 -
2025-09-30 10:24:36 INFO: 127.0.0.1 - - [30/Sep/2025 10:24:36] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-09-30 10:24:40 INFO: New session started: aa58f7c3-bdfc-4cf6-8d58-88bfe4c0f2c1
2025-09-30 10:24:40 INFO: Received request data: {'mobile': '918921729081'}
2025-09-30 10:24:40 INFO: Updated mobile: 918921729081
2025-09-30 10:24:42 INFO: Updated name: MC DONALDS
2025-09-30 10:24:42 INFO: 127.0.0.1 - - [30/Sep/2025 10:24:42] "POST /number HTTP/1.1" 200 -
2025-09-30 10:24:43 INFO: 127.0.0.1 - - [30/Sep/2025 10:24:43] "POST /names HTTP/1.1" 200 -
2025-09-30 10:24:46 INFO: Received user message: hello
2025-09-30 10:24:46 INFO: ###################aa58f7c3-bdfc-4cf6-8d58-88bfe4c0f2c1##############################
2025-09-30 10:24:48 INFO: context fetched succcessfully
2025-09-30 10:24:48 INFO: []
2025-09-30 10:24:50 INFO: intent classified
2025-09-30 10:24:50 INFO: general
2025-09-30 10:24:50 INFO: |||||||||||||    general    |||||||||||||||||||
2025-09-30 10:24:50 INFO: intent = general
2025-09-30 10:24:53 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-30 10:24:58 INFO: 127.0.0.1 - - [30/Sep/2025 10:24:58] "POST /process-data HTTP/1.1" 200 -
2025-09-30 10:26:11 INFO: 127.0.0.1 - - [30/Sep/2025 10:26:11] "GET / HTTP/1.1" 200 -
2025-09-30 10:26:11 INFO: 127.0.0.1 - - [30/Sep/2025 10:26:11] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-09-30 10:26:12 INFO: 127.0.0.1 - - [30/Sep/2025 10:26:12] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-09-30 10:26:18 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-09-30 10:26:18 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-09-30 10:26:19 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 10:26:27 WARNING:  * Debugger is active!
2025-09-30 10:26:27 INFO:  * Debugger PIN: 143-190-272
2025-09-30 10:26:27 INFO: 127.0.0.1 - - [30/Sep/2025 10:26:27] "GET / HTTP/1.1" 200 -
2025-09-30 10:26:28 INFO: 127.0.0.1 - - [30/Sep/2025 10:26:28] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-09-30 10:26:28 INFO: 127.0.0.1 - - [30/Sep/2025 10:26:28] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-09-30 10:26:45 INFO: New session started: 58b16945-f0d9-4d13-a8c7-392e1f81e9b7
2025-09-30 10:26:45 INFO: Received request data: {'mobile': '918921729081'}
2025-09-30 10:26:45 INFO: Updated mobile: 918921729081
2025-09-30 10:26:47 INFO: Updated name: MC DONALDS
2025-09-30 10:26:47 INFO: 127.0.0.1 - - [30/Sep/2025 10:26:47] "POST /number HTTP/1.1" 200 -
2025-09-30 10:26:47 INFO: 127.0.0.1 - - [30/Sep/2025 10:26:47] "POST /names HTTP/1.1" 200 -
2025-09-30 14:12:29 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-09-30 14:12:29 INFO: [33mPress CTRL+C to quit[0m
2025-09-30 14:12:29 INFO:  * Restarting with watchdog (windowsapi)
2025-09-30 14:12:36 WARNING:  * Debugger is active!
2025-09-30 14:12:36 INFO:  * Debugger PIN: 143-190-272
2025-09-30 14:12:36 INFO: 127.0.0.1 - - [30/Sep/2025 14:12:36] "GET / HTTP/1.1" 200 -
2025-09-30 14:12:36 INFO: 127.0.0.1 - - [30/Sep/2025 14:12:36] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 10:21:16 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-06 10:21:16 INFO: [33mPress CTRL+C to quit[0m
2025-10-06 10:21:16 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 10:21:50 WARNING:  * Debugger is active!
2025-10-06 10:21:50 INFO:  * Debugger PIN: 115-265-433
2025-10-06 10:21:51 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\httpx\\_types.py', reloading
2025-10-06 10:21:51 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\httpx\\_urls.py', reloading
2025-10-06 10:21:51 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\openai\\_streaming.py', reloading
2025-10-06 10:21:53 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 10:22:45 WARNING:  * Debugger is active!
2025-10-06 10:22:45 INFO:  * Debugger PIN: 115-265-433
2025-10-06 10:22:46 INFO: 127.0.0.1 - - [06/Oct/2025 10:22:46] "GET / HTTP/1.1" 200 -
2025-10-06 10:22:46 INFO: 127.0.0.1 - - [06/Oct/2025 10:22:46] "GET / HTTP/1.1" 200 -
2025-10-06 10:22:49 INFO: 127.0.0.1 - - [06/Oct/2025 10:22:49] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 10:22:51 INFO: 127.0.0.1 - - [06/Oct/2025 10:22:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-10-06 10:24:39 INFO: New session started: aab35b51-3dea-450c-97a4-0ad2e3881cc5
2025-10-06 10:24:39 INFO: Received request data: {'mobile': '918921729081'}
2025-10-06 10:24:39 INFO: Updated mobile: 918921729081
2025-10-06 10:24:40 INFO: Updated name: MC DONALDS
2025-10-06 10:24:40 INFO: 127.0.0.1 - - [06/Oct/2025 10:24:40] "POST /number HTTP/1.1" 200 -
2025-10-06 10:24:40 INFO: 127.0.0.1 - - [06/Oct/2025 10:24:40] "POST /names HTTP/1.1" 200 -
2025-10-06 10:24:48 INFO: Received user message: what is the order status
2025-10-06 10:24:48 INFO: ###################aab35b51-3dea-450c-97a4-0ad2e3881cc5##############################
2025-10-06 10:24:51 INFO: context fetched succcessfully
2025-10-06 10:24:51 INFO: []
2025-10-06 10:24:54 INFO: intent classified
2025-10-06 10:24:54 INFO: general
2025-10-06 10:24:54 INFO: |||||||||||||    general    |||||||||||||||||||
2025-10-06 10:24:54 INFO: intent = general
2025-10-06 10:24:58 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 404 Not Found"
2025-10-06 10:24:58 ERROR: OpenRouter API error: Error code: 404 - {'error': {'message': 'No endpoints found for x-ai/grok-4-fast:free.', 'code': 404}, 'user_id': 'user_32XnM3UiGpUnpInAt6SOPlWP0HW'}
2025-10-06 10:24:58 INFO: 127.0.0.1 - - [06/Oct/2025 10:24:58] "POST /process-data HTTP/1.1" 200 -
2025-10-06 10:26:32 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py', reloading
2025-10-06 10:26:35 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 10:26:55 WARNING:  * Debugger is active!
2025-10-06 10:26:55 INFO:  * Debugger PIN: 115-265-433
2025-10-06 10:27:01 INFO: 127.0.0.1 - - [06/Oct/2025 10:27:01] "GET / HTTP/1.1" 200 -
2025-10-06 10:27:01 INFO: 127.0.0.1 - - [06/Oct/2025 10:27:01] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 10:27:04 INFO: New session started: b44012b5-a001-4189-b1aa-5381c179c422
2025-10-06 10:27:04 INFO: Received request data: {'mobile': '918921729081'}
2025-10-06 10:27:04 INFO: Updated mobile: 918921729081
2025-10-06 10:27:07 INFO: Updated name: MC DONALDS
2025-10-06 10:27:07 INFO: 127.0.0.1 - - [06/Oct/2025 10:27:07] "POST /number HTTP/1.1" 200 -
2025-10-06 10:27:07 INFO: New session started: 313e1ca6-5973-473c-b108-96e859b1529e
2025-10-06 10:27:07 INFO: Received request data: {'mobile': '918921729081'}
2025-10-06 10:27:07 INFO: Updated mobile: 918921729081
2025-10-06 10:27:08 INFO: 127.0.0.1 - - [06/Oct/2025 10:27:08] "POST /names HTTP/1.1" 200 -
2025-10-06 10:27:08 INFO: Updated name: MC DONALDS
2025-10-06 10:27:08 INFO: 127.0.0.1 - - [06/Oct/2025 10:27:08] "POST /number HTTP/1.1" 200 -
2025-10-06 10:27:08 INFO: 127.0.0.1 - - [06/Oct/2025 10:27:08] "POST /names HTTP/1.1" 200 -
2025-10-06 10:27:15 INFO: Received user message: what is the roode rstatsus
2025-10-06 10:27:15 INFO: ###################313e1ca6-5973-473c-b108-96e859b1529e##############################
2025-10-06 10:27:16 INFO: context fetched succcessfully
2025-10-06 10:27:16 INFO: []
2025-10-06 10:27:17 INFO: intent classified
2025-10-06 10:27:17 INFO: general
2025-10-06 10:27:17 INFO: |||||||||||||    general    |||||||||||||||||||
2025-10-06 10:27:17 INFO: intent = general
2025-10-06 10:27:21 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:27:46 INFO: 127.0.0.1 - - [06/Oct/2025 10:27:46] "POST /process-data HTTP/1.1" 200 -
2025-10-06 10:29:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:29:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:29:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:29:11 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 10:29:20 WARNING:  * Debugger is active!
2025-10-06 10:29:20 INFO:  * Debugger PIN: 115-265-433
2025-10-06 10:29:22 INFO: Received user message: what is order status in july
2025-10-06 10:29:22 INFO: ###################313e1ca6-5973-473c-b108-96e859b1529e##############################
2025-10-06 10:29:23 INFO: context fetched succcessfully
2025-10-06 10:29:23 INFO: []
2025-10-06 10:29:25 INFO: intent classified
2025-10-06 10:29:25 INFO: data_fetch
2025-10-06 10:29:25 INFO: |||||||||||||    data_fetch    |||||||||||||||||||
2025-10-06 10:29:25 INFO: context fetched succcessfully
2025-10-06 10:29:27 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:29:27 INFO: Generated SQL query: new_question
2025-10-06 10:29:27 INFO: ||||||||||||       new_question          ||||||||||||
2025-10-06 10:29:27 INFO: intent = data_fetch
2025-10-06 10:29:27 INFO: context fetched succcessfully
2025-10-06 10:29:27 INFO: ----------------------[]----------------------
2025-10-06 10:29:27 INFO: Started SQL generation
2025-10-06 10:29:30 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:29:30 INFO: Generated SQL query: ```sql
SELECT "order_status" FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' LIMIT 1;
```
2025-10-06 10:29:30 INFO: generated sql = ```sql
SELECT "order_status" FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' LIMIT 1;
```
2025-10-06 10:29:30 INFO: sql generation success
2025-10-06 10:29:31 ERROR: Database error: syntax error at or near "```"
LINE 1: ```sql
        ^

2025-10-06 10:29:31 ERROR: database query execution failure
2025-10-06 10:29:31 INFO: context fetched succcessfully
2025-10-06 10:29:31 INFO: wrapped gen = <generator object store_and_stream at 0x000001FC2D853E20>
2025-10-06 10:29:31 INFO: Started summary generation
2025-10-06 10:29:31 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:29:32 INFO: 127.0.0.1 - - [06/Oct/2025 10:29:32] "POST /process-data HTTP/1.1" 200 -
2025-10-06 10:29:34 INFO:  Sorry, we couldn't find the data you are looking for.
2025-10-06 10:29:34 INFO: context stored successfully
2025-10-06 10:30:14 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:30:14 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:30:14 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:30:15 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 10:30:23 WARNING:  * Debugger is active!
2025-10-06 10:30:23 INFO:  * Debugger PIN: 115-265-433
2025-10-06 10:30:24 INFO: Received user message: what is order status in july
2025-10-06 10:30:24 INFO: ###################313e1ca6-5973-473c-b108-96e859b1529e##############################
2025-10-06 10:30:24 INFO: context fetched succcessfully
2025-10-06 10:30:24 INFO: [{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}]
2025-10-06 10:30:27 INFO: intent classified
2025-10-06 10:30:27 INFO: data_fetch
2025-10-06 10:30:27 INFO: |||||||||||||    data_fetch    |||||||||||||||||||
2025-10-06 10:30:27 INFO: context fetched succcessfully
2025-10-06 10:30:29 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:30:29 INFO: Generated SQL query: new_question
2025-10-06 10:30:29 INFO: ||||||||||||       new_question          ||||||||||||
2025-10-06 10:30:29 INFO: intent = data_fetch
2025-10-06 10:30:29 INFO: context fetched succcessfully
2025-10-06 10:30:29 INFO: ----------------------[{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}]----------------------
2025-10-06 10:30:29 INFO: Started SQL generation
2025-10-06 10:30:30 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:30:38 INFO: Generated SQL query: SELECT "order_status" FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "final_status_at" >= '2025-07-01 00:00:00' AND "final_status_at" < '2025-08-01 00:00:00' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 10:30:38 INFO: generated sql = SELECT "order_status" FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "final_status_at" >= '2025-07-01 00:00:00' AND "final_status_at" < '2025-08-01 00:00:00' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 10:30:38 INFO: sql generation success
2025-10-06 10:30:39 INFO: Database fetching successful: [
  {
    "order_status": "Delivered"
  }
]
2025-10-06 10:30:39 INFO: data from database stored successfully
2025-10-06 10:30:39 INFO: database query executed succesfully
2025-10-06 10:30:39 INFO: context fetched succcessfully
2025-10-06 10:30:39 INFO: wrapped gen = <generator object store_and_stream at 0x000002CA013D3BE0>
2025-10-06 10:30:39 INFO: Started summary generation
2025-10-06 10:30:40 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:30:40 INFO: 127.0.0.1 - - [06/Oct/2025 10:30:40] "POST /process-data HTTP/1.1" 200 -
2025-10-06 10:30:41 INFO:  The order status in July is Delivered.
2025-10-06 10:30:41 INFO: context stored successfully
2025-10-06 10:31:03 INFO: Received user message: what is order number of the latest order i plaved in july
2025-10-06 10:31:03 INFO: ###################313e1ca6-5973-473c-b108-96e859b1529e##############################
2025-10-06 10:31:03 INFO: context fetched succcessfully
2025-10-06 10:31:03 INFO: [{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'user message :what is order status in july, model response :  The order status in July is Delivered.'}]
2025-10-06 10:31:05 INFO: intent classified
2025-10-06 10:31:05 INFO: data_fetch
2025-10-06 10:31:05 INFO: |||||||||||||    data_fetch    |||||||||||||||||||
2025-10-06 10:31:05 INFO: context fetched succcessfully
2025-10-06 10:31:05 INFO: db_data fetched for followup
2025-10-06 10:31:06 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:31:06 INFO: Generated SQL query: new_question
2025-10-06 10:31:06 INFO: ||||||||||||       new_question          ||||||||||||
2025-10-06 10:31:06 INFO: intent = data_fetch
2025-10-06 10:31:06 INFO: context fetched succcessfully
2025-10-06 10:31:06 INFO: ----------------------[{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'user message :what is order status in july, model response :  The order status in July is Delivered.'}]----------------------
2025-10-06 10:31:06 INFO: Started SQL generation
2025-10-06 10:31:07 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:31:11 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND EXTRACT(MONTH FROM "order_created_at") = 7 ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 10:31:11 INFO: generated sql = SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND EXTRACT(MONTH FROM "order_created_at") = 7 ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 10:31:11 INFO: sql generation success
2025-10-06 10:31:12 INFO: Database fetching successful: [
  {
    "order_number": 1823383
  }
]
2025-10-06 10:31:12 INFO: data from database stored successfully
2025-10-06 10:31:12 INFO: database query executed succesfully
2025-10-06 10:31:12 INFO: context fetched succcessfully
2025-10-06 10:31:12 INFO: wrapped gen = <generator object store_and_stream at 0x000002CA01A739A0>
2025-10-06 10:31:12 INFO: Started summary generation
2025-10-06 10:31:13 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:31:13 INFO: 127.0.0.1 - - [06/Oct/2025 10:31:13] "POST /process-data HTTP/1.1" 200 -
2025-10-06 10:31:14 INFO:  The latest order placed in July is 1823383.
2025-10-06 10:31:14 INFO: context stored successfully
2025-10-06 10:33:33 INFO: Received user message: wht is its status
2025-10-06 10:33:33 INFO: ###################313e1ca6-5973-473c-b108-96e859b1529e##############################
2025-10-06 10:33:34 INFO: context fetched succcessfully
2025-10-06 10:33:34 INFO: [{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'user message :what is order status in july, model response :  The order status in July is Delivered.'}, {'role': 'user', 'content': 'user message :what is order number of the latest order i plaved in july, model response :  The latest order placed in July is 1823383.'}]
2025-10-06 10:33:35 INFO: intent classified
2025-10-06 10:33:35 INFO: general
2025-10-06 10:33:35 INFO: |||||||||||||    general    |||||||||||||||||||
2025-10-06 10:33:35 INFO: intent = general
2025-10-06 10:33:36 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:33:37 INFO: 127.0.0.1 - - [06/Oct/2025 10:33:37] "POST /process-data HTTP/1.1" 200 -
2025-10-06 10:33:56 INFO: Received user message: what is the status of  1823383.
2025-10-06 10:33:56 INFO: ###################313e1ca6-5973-473c-b108-96e859b1529e##############################
2025-10-06 10:33:56 INFO: context fetched succcessfully
2025-10-06 10:33:56 INFO: [{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'user message :what is order status in july, model response :  The order status in July is Delivered.'}, {'role': 'user', 'content': 'user message :what is order number of the latest order i plaved in july, model response :  The latest order placed in July is 1823383.'}]
2025-10-06 10:33:57 INFO: intent classified
2025-10-06 10:33:57 INFO: data_fetch
2025-10-06 10:33:57 INFO: |||||||||||||    data_fetch    |||||||||||||||||||
2025-10-06 10:33:57 INFO: context fetched succcessfully
2025-10-06 10:33:57 INFO: db_data fetched for followup
2025-10-06 10:33:58 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:33:58 INFO: Generated SQL query: new_question
2025-10-06 10:33:58 INFO: ||||||||||||       new_question          ||||||||||||
2025-10-06 10:33:58 INFO: intent = data_fetch
2025-10-06 10:33:58 INFO: context fetched succcessfully
2025-10-06 10:33:58 INFO: ----------------------[{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'user message :what is order status in july, model response :  The order status in July is Delivered.'}, {'role': 'user', 'content': 'user message :what is order number of the latest order i plaved in july, model response :  The latest order placed in July is 1823383.'}]----------------------
2025-10-06 10:33:58 INFO: Started SQL generation
2025-10-06 10:33:59 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:34:00 INFO: Generated SQL query: SELECT "order_status" FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "id" = 1823383 LIMIT 1;
2025-10-06 10:34:00 INFO: generated sql = SELECT "order_status" FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "id" = 1823383 LIMIT 1;
2025-10-06 10:34:00 INFO: sql generation success
2025-10-06 10:34:01 INFO: Database fetching successful: [
  {
    "order_status": "Delivered"
  }
]
2025-10-06 10:34:01 INFO: data from database stored successfully
2025-10-06 10:34:01 INFO: database query executed succesfully
2025-10-06 10:34:01 INFO: context fetched succcessfully
2025-10-06 10:34:01 INFO: wrapped gen = <generator object store_and_stream at 0x000002CA01A72F80>
2025-10-06 10:34:01 INFO: Started summary generation
2025-10-06 10:34:02 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:34:02 INFO: 127.0.0.1 - - [06/Oct/2025 10:34:02] "POST /process-data HTTP/1.1" 200 -
2025-10-06 10:34:03 INFO:  The status of order 1823383 is Delivered.
2025-10-06 10:34:03 INFO: context stored successfully
2025-10-06 10:34:20 INFO: Received user message: list all the orders i placed in july
2025-10-06 10:34:20 INFO: ###################313e1ca6-5973-473c-b108-96e859b1529e##############################
2025-10-06 10:34:20 INFO: context fetched succcessfully
2025-10-06 10:34:20 INFO: [{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'user message :what is order status in july, model response :  The order status in July is Delivered.'}, {'role': 'user', 'content': 'user message :what is order number of the latest order i plaved in july, model response :  The latest order placed in July is 1823383.'}, {'role': 'user', 'content': 'user message :what is the status of  1823383., model response :  The status of order 1823383 is Delivered.'}]
2025-10-06 10:34:22 INFO: intent classified
2025-10-06 10:34:22 INFO: data_fetch
2025-10-06 10:34:22 INFO: |||||||||||||    data_fetch    |||||||||||||||||||
2025-10-06 10:34:22 INFO: context fetched succcessfully
2025-10-06 10:34:22 INFO: db_data fetched for followup
2025-10-06 10:34:23 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:34:23 INFO: Generated SQL query: new_question
2025-10-06 10:34:23 INFO: ||||||||||||       new_question          ||||||||||||
2025-10-06 10:34:23 INFO: intent = data_fetch
2025-10-06 10:34:23 INFO: context fetched succcessfully
2025-10-06 10:34:23 INFO: ----------------------[{'role': 'user', 'content': "user message :what is order status in july, model response :  Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'user message :what is order status in july, model response :  The order status in July is Delivered.'}, {'role': 'user', 'content': 'user message :what is order number of the latest order i plaved in july, model response :  The latest order placed in July is 1823383.'}, {'role': 'user', 'content': 'user message :what is the status of  1823383., model response :  The status of order 1823383 is Delivered.'}]----------------------
2025-10-06 10:34:23 INFO: Started SQL generation
2025-10-06 10:34:27 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:35:19 INFO: Generated SQL query: SELECT "id", "order_status", "delivery_date", "order_created_at", "order_accepted_at", "start_ride_at", "reached_shop_at", "order_picked_at", "shipped_at", "reached_dest_at", "final_status_at", "customer_number", "customer_name", "client_id", "captain_name", "shop_to_delivery_km", "cancellation_reason" FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' LIMIT 1;
2025-10-06 10:35:19 INFO: generated sql = SELECT "id", "order_status", "delivery_date", "order_created_at", "order_accepted_at", "start_ride_at", "reached_shop_at", "order_picked_at", "shipped_at", "reached_dest_at", "final_status_at", "customer_number", "customer_name", "client_id", "captain_name", "shop_to_delivery_km", "cancellation_reason" FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' LIMIT 1;
2025-10-06 10:35:19 INFO: sql generation success
2025-10-06 10:35:20 INFO: Database fetching successful: [
  {
    "id": 1766780,
    "order_status": "Delivered",
    "delivery_date": "2025-07-01T00:21:37",
    "order_created_at": "2025-07-01T00:08:12",
    "order_accepted_at": "2025-07-01T00:09:41",
    "start_ride_at": "2025-07-01T00:10:55",
    "reached_shop_at": "2025-07-01T00:10:57",
    "order_picked_at": "2025-07-01T00:16:54",
    "shipped_at": "2025-07-01T00:16:56",
    "reached_dest_at": "2025-07-01T00:21:35",
    "final_status_at": "2025-07-01T00:21:37",
    "customer_number": 2461883215,
    "customer_name": "Customer_FNB",
    "client_id": 3,
    "captain_name": "NADER FUAD -DMM - JOD10",
    "shop_to_delivery_km": 1.612,
    "cancellation_reason": "0"
  }
]
2025-10-06 10:35:20 INFO: data from database stored successfully
2025-10-06 10:35:20 INFO: database query executed succesfully
2025-10-06 10:35:20 INFO: context fetched succcessfully
2025-10-06 10:35:20 INFO: wrapped gen = <generator object store_and_stream at 0x000002CA01B4EB00>
2025-10-06 10:35:20 INFO: Started summary generation
2025-10-06 10:35:21 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 10:35:23 INFO: 127.0.0.1 - - [06/Oct/2025 10:35:23] "POST /process-data HTTP/1.1" 200 -
2025-10-06 10:35:23 INFO:  
2025-10-06 10:35:23 INFO: context stored successfully
2025-10-06 10:38:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 10:38:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 10:38:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 10:38:10 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 10:38:19 WARNING:  * Debugger is active!
2025-10-06 10:38:19 INFO:  * Debugger PIN: 115-265-433
2025-10-06 10:44:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 10:44:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 10:44:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 10:44:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:44:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:44:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 10:44:56 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 10:45:05 WARNING:  * Debugger is active!
2025-10-06 10:45:05 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:12:36 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-06 11:12:36 INFO: [33mPress CTRL+C to quit[0m
2025-10-06 11:12:36 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:12:42 WARNING:  * Debugger is active!
2025-10-06 11:12:42 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:12:51 INFO: 127.0.0.1 - - [06/Oct/2025 11:12:51] "GET / HTTP/1.1" 200 -
2025-10-06 11:12:51 INFO: 127.0.0.1 - - [06/Oct/2025 11:12:51] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 11:12:54 INFO: New session started: 672928f7-ed19-4c46-81ef-68cefbca8153
2025-10-06 11:12:54 INFO: Received request data: {'mobile': '918921729081'}
2025-10-06 11:12:54 INFO: Updated mobile: 918921729081
2025-10-06 11:12:58 INFO: Updated name: MC DONALDS
2025-10-06 11:12:58 INFO: 127.0.0.1 - - [06/Oct/2025 11:12:58] "POST /number HTTP/1.1" 200 -
2025-10-06 11:12:58 INFO: 127.0.0.1 - - [06/Oct/2025 11:12:58] "POST /names HTTP/1.1" 200 -
2025-10-06 11:13:04 INFO: Received user message: what is the order status
2025-10-06 11:13:04 INFO: Session ID: 672928f7-ed19-4c46-81ef-68cefbca8153
2025-10-06 11:13:05 INFO: context fetched succcessfully
2025-10-06 11:13:05 INFO: Context retrieved: []
2025-10-06 11:13:06 INFO: intent classified
2025-10-06 11:13:06 INFO: general
2025-10-06 11:13:06 INFO: Classified intent: general
2025-10-06 11:13:06 INFO: Processing general intent
2025-10-06 11:13:06 ERROR: Error generating general reply: module 'function' has no attribute 'generate_openrouter_reply'
2025-10-06 11:13:06 INFO: 127.0.0.1 - - [06/Oct/2025 11:13:06] "[35m[1mPOST /process-data HTTP/1.1[0m" 500 -
2025-10-06 11:16:00 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:16:00 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:16:00 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:16:01 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:16:09 WARNING:  * Debugger is active!
2025-10-06 11:16:09 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:16:15 INFO: Received user message: what is the order statsus
2025-10-06 11:16:15 INFO: Session ID: 672928f7-ed19-4c46-81ef-68cefbca8153
2025-10-06 11:16:16 INFO: context fetched succcessfully
2025-10-06 11:16:16 INFO: Context retrieved: []
2025-10-06 11:16:18 INFO: intent classified
2025-10-06 11:16:18 INFO: general
2025-10-06 11:16:18 INFO: Classified intent: general
2025-10-06 11:16:18 INFO: Processing general intent
2025-10-06 11:16:19 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:16:20 INFO: 127.0.0.1 - - [06/Oct/2025 11:16:20] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:17:02 INFO: Received user message: when was the last order placed
2025-10-06 11:17:02 INFO: Session ID: 672928f7-ed19-4c46-81ef-68cefbca8153
2025-10-06 11:17:03 INFO: context fetched succcessfully
2025-10-06 11:17:03 INFO: Context retrieved: []
2025-10-06 11:17:04 INFO: intent classified
2025-10-06 11:17:04 INFO: general
2025-10-06 11:17:04 INFO: Classified intent: general
2025-10-06 11:17:04 INFO: Processing general intent
2025-10-06 11:17:05 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:17:07 INFO: 127.0.0.1 - - [06/Oct/2025 11:17:07] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:19:13 INFO: Received user message: when was the last order placed
2025-10-06 11:19:13 INFO: Session ID: 672928f7-ed19-4c46-81ef-68cefbca8153
2025-10-06 11:19:13 INFO: context fetched succcessfully
2025-10-06 11:19:13 INFO: Context retrieved: []
2025-10-06 11:19:15 INFO: intent classified
2025-10-06 11:19:15 INFO: general
2025-10-06 11:19:15 INFO: Classified intent: general
2025-10-06 11:19:15 INFO: Processing general intent
2025-10-06 11:19:15 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:19:16 INFO: 127.0.0.1 - - [06/Oct/2025 11:19:16] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:21:22 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:21:22 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:21:23 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:21:30 WARNING:  * Debugger is active!
2025-10-06 11:21:30 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:21:30 INFO: Received user message: when was the last order placed-------------------------------------------------------------------------------
2025-10-06 11:21:30 INFO: Session ID: 672928f7-ed19-4c46-81ef-68cefbca8153
2025-10-06 11:21:30 INFO: context fetched succcessfully
2025-10-06 11:21:30 INFO: Context retrieved: []
2025-10-06 11:21:32 INFO: intent classified
2025-10-06 11:21:32 INFO: general
2025-10-06 11:21:32 INFO: Classified intent: general
2025-10-06 11:21:32 INFO: Processing general intent
2025-10-06 11:21:34 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:21:34 INFO: 127.0.0.1 - - [06/Oct/2025 11:21:34] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:23:03 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\__init__.py', reloading
2025-10-06 11:23:04 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py', reloading
2025-10-06 11:23:04 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\sansio\\app.py', reloading
2025-10-06 11:23:04 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\sansio\\scaffold.py', reloading
2025-10-06 11:23:04 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\globals.py', reloading
2025-10-06 11:23:04 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\wrappers.py', reloading
2025-10-06 11:23:04 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\werkzeug\\wrappers\\__init__.py', reloading
2025-10-06 11:23:04 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\werkzeug\\wrappers\\request.py', reloading
2025-10-06 11:23:07 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:23:19 WARNING:  * Debugger is active!
2025-10-06 11:23:19 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:32:21 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:32:21 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:32:23 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:32:31 WARNING:  * Debugger is active!
2025-10-06 11:32:31 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:32:56 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:32:56 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:32:57 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:33:06 WARNING:  * Debugger is active!
2025-10-06 11:33:06 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:33:21 INFO: 127.0.0.1 - - [06/Oct/2025 11:33:21] "GET / HTTP/1.1" 200 -
2025-10-06 11:33:21 INFO: 127.0.0.1 - - [06/Oct/2025 11:33:21] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 11:33:23 INFO: New session started: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:33:23 INFO: Received request data: {'mobile': '919562301314'}
2025-10-06 11:33:23 INFO: Updated mobile: 919562301314
2025-10-06 11:33:24 INFO: Updated name: Dominos Pizza
2025-10-06 11:33:24 INFO: 127.0.0.1 - - [06/Oct/2025 11:33:24] "POST /number HTTP/1.1" 200 -
2025-10-06 11:33:25 INFO: 127.0.0.1 - - [06/Oct/2025 11:33:25] "POST /names HTTP/1.1" 200 -
2025-10-06 11:33:32 INFO: --------------------------Received user message: what is the orxer status--------------------------
2025-10-06 11:33:32 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:33:33 INFO: context fetched succcessfully
2025-10-06 11:33:33 INFO: Context retrieved: []
2025-10-06 11:33:35 INFO: intent classified
2025-10-06 11:33:35 INFO: general
2025-10-06 11:33:35 INFO: Classified intent: general
2025-10-06 11:33:35 INFO: Processing general intent
2025-10-06 11:33:36 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:33:37 INFO: 127.0.0.1 - - [06/Oct/2025 11:33:37] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:33:59 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 11:33:59 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:34:00 INFO: context fetched succcessfully
2025-10-06 11:34:00 INFO: Context retrieved: []
2025-10-06 11:34:01 INFO: intent classified
2025-10-06 11:34:01 INFO: data_fetch
2025-10-06 11:34:01 INFO: Classified intent: data_fetch
2025-10-06 11:34:02 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:34:02 INFO: Generated SQL query: new_question
2025-10-06 11:34:02 INFO: Is followup question: new_question
2025-10-06 11:34:02 INFO: Processing data fetch intent
2025-10-06 11:34:02 INFO: Started SQL generation
2025-10-06 11:34:04 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:34:05 INFO: Generated SQL query: ```sql
SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
```
2025-10-06 11:34:05 INFO: SQL generation success: ```sql
SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
```
2025-10-06 11:34:06 ERROR: Database error: syntax error at or near "```"
LINE 1: ```sql
        ^

2025-10-06 11:34:06 ERROR: Database query execution failure
2025-10-06 11:34:07 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:34:07 ERROR: Failed to store context: store_message() missing 1 required positional argument: 'response'
2025-10-06 11:34:07 INFO: 127.0.0.1 - - [06/Oct/2025 11:34:07] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:35:00 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:35:00 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:35:00 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:35:01 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:35:08 WARNING:  * Debugger is active!
2025-10-06 11:35:08 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:35:08 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 11:35:08 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:35:09 INFO: context fetched succcessfully
2025-10-06 11:35:09 INFO: Context retrieved: []
2025-10-06 11:35:11 INFO: intent classified
2025-10-06 11:35:11 INFO: data_fetch
2025-10-06 11:35:11 INFO: Classified intent: data_fetch
2025-10-06 11:35:13 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:35:13 INFO: Generated SQL query: new_question
2025-10-06 11:35:13 INFO: Is followup question: new_question
2025-10-06 11:35:13 INFO: Processing data fetch intent
2025-10-06 11:35:13 INFO: Started SQL generation
2025-10-06 11:35:15 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:35:16 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" <= '2025-10-06 11:35:09.579462' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 11:35:16 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" <= '2025-10-06 11:35:09.579462' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 11:35:16 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 11:35:17 INFO: data from database stored successfully
2025-10-06 11:35:17 INFO: Database query executed successfully
2025-10-06 11:35:18 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:35:18 ERROR: Failed to store context: store_message() missing 1 required positional argument: 'response'
2025-10-06 11:35:18 INFO: 127.0.0.1 - - [06/Oct/2025 11:35:18] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:35:49 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:35:49 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:35:49 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:35:50 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:35:57 WARNING:  * Debugger is active!
2025-10-06 11:35:57 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:35:57 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 11:35:57 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:35:57 INFO: context fetched succcessfully
2025-10-06 11:35:57 INFO: Context retrieved: []
2025-10-06 11:35:58 INFO: intent classified
2025-10-06 11:35:58 INFO: data_fetch
2025-10-06 11:35:59 INFO: Classified intent: data_fetch
2025-10-06 11:35:59 INFO: db_data fetched for followup
2025-10-06 11:36:00 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:36:00 INFO: Generated SQL query: new_question
2025-10-06 11:36:00 INFO: Is followup question: new_question
2025-10-06 11:36:00 INFO: Processing data fetch intent
2025-10-06 11:36:00 INFO: Started SQL generation
2025-10-06 11:36:08 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:36:08 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:36:08 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:36:12 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 11:36:12 INFO: data from database stored successfully
2025-10-06 11:36:12 INFO: Database query executed successfully
2025-10-06 11:36:14 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:36:14 ERROR: Failed to store context: store_message() missing 1 required positional argument: 'response'
2025-10-06 11:36:14 ERROR: Error generating response: Object of type set is not JSON serializable
2025-10-06 11:36:14 INFO: 127.0.0.1 - - [06/Oct/2025 11:36:14] "[35m[1mPOST /process-data HTTP/1.1[0m" 500 -
2025-10-06 11:36:44 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:36:44 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:36:44 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:36:46 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:36:52 WARNING:  * Debugger is active!
2025-10-06 11:36:52 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:36:52 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 11:36:52 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:36:53 INFO: context fetched succcessfully
2025-10-06 11:36:53 INFO: Context retrieved: []
2025-10-06 11:36:55 INFO: intent classified
2025-10-06 11:36:55 INFO: data_fetch
2025-10-06 11:36:55 INFO: Classified intent: data_fetch
2025-10-06 11:36:55 INFO: db_data fetched for followup
2025-10-06 11:36:56 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:36:56 INFO: Generated SQL query: new_question
2025-10-06 11:36:56 INFO: Is followup question: new_question
2025-10-06 11:36:56 INFO: Processing data fetch intent
2025-10-06 11:36:56 INFO: Started SQL generation
2025-10-06 11:37:01 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:37:01 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:37:01 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:37:03 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 11:37:03 INFO: data from database stored successfully
2025-10-06 11:37:03 INFO: Database query executed successfully
2025-10-06 11:37:04 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:37:05 ERROR: Failed to store context: store_message() missing 1 required positional argument: 'response'
2025-10-06 11:37:05 INFO: 127.0.0.1 - - [06/Oct/2025 11:37:05] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:39:47 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:39:47 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:39:47 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:39:47 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:39:48 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:39:55 WARNING:  * Debugger is active!
2025-10-06 11:39:55 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:39:55 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 11:39:55 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:39:56 INFO: context fetched succcessfully
2025-10-06 11:39:56 INFO: Context retrieved: []
2025-10-06 11:39:57 INFO: intent classified
2025-10-06 11:39:57 INFO: data_fetch
2025-10-06 11:39:57 INFO: Classified intent: data_fetch
2025-10-06 11:39:57 INFO: db_data fetched for followup
2025-10-06 11:39:58 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:39:59 INFO: Generated SQL query: new_question
2025-10-06 11:39:59 INFO: Is followup question: new_question
2025-10-06 11:39:59 INFO: Processing data fetch intent
2025-10-06 11:39:59 INFO: Started SQL generation
2025-10-06 11:40:02 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:40:02 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:40:02 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:40:03 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 11:40:03 INFO: data from database stored successfully
2025-10-06 11:40:03 INFO: Database query executed successfully
2025-10-06 11:40:05 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:40:05 ERROR: error storing info: NOT NULL constraint failed: user_context.response
2025-10-06 11:40:05 ERROR: error storing info: NOT NULL constraint failed: user_context.response
2025-10-06 11:40:05 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:40:05 INFO: 127.0.0.1 - - [06/Oct/2025 11:40:05] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:43:13 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:43:13 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:43:13 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:43:15 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:43:23 WARNING:  * Debugger is active!
2025-10-06 11:43:23 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:45:48 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 11:45:48 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:45:49 INFO: context fetched succcessfully
2025-10-06 11:45:49 INFO: Context retrieved: []
2025-10-06 11:45:50 INFO: intent classified
2025-10-06 11:45:50 INFO: data_fetch
2025-10-06 11:45:50 INFO: Classified intent: data_fetch
2025-10-06 11:45:50 INFO: db_data fetched for followup
2025-10-06 11:45:52 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:45:52 INFO: Generated SQL query: new_question
2025-10-06 11:45:52 INFO: Is followup question: new_question
2025-10-06 11:45:52 INFO: Processing data fetch intent
2025-10-06 11:45:52 INFO: Started SQL generation
2025-10-06 11:45:57 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:45:57 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:45:57 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:45:58 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 11:45:58 INFO: data from database stored successfully
2025-10-06 11:45:58 INFO: Database query executed successfully
2025-10-06 11:45:59 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:46:00 ERROR: error storing info: NOT NULL constraint failed: user_context.response
2025-10-06 11:46:00 ERROR: error storing info: NOT NULL constraint failed: user_context.response
2025-10-06 11:46:00 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:46:00 INFO: 127.0.0.1 - - [06/Oct/2025 11:46:00] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:51:47 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py', reloading
2025-10-06 11:51:48 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:51:59 WARNING:  * Debugger is active!
2025-10-06 11:51:59 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:51:59 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 11:51:59 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:52:00 ERROR: error getting context:no such column: response
2025-10-06 11:52:00 INFO: Context retrieved: []
2025-10-06 11:52:01 INFO: intent classified
2025-10-06 11:52:01 INFO: data_fetch
2025-10-06 11:52:01 INFO: Classified intent: data_fetch
2025-10-06 11:52:01 INFO: db_data fetched for followup
2025-10-06 11:52:03 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:52:04 INFO: Generated SQL query: new_question
2025-10-06 11:52:04 INFO: Is followup question: new_question
2025-10-06 11:52:04 INFO: Processing data fetch intent
2025-10-06 11:52:04 INFO: Started SQL generation
2025-10-06 11:52:06 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:52:07 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "final_status_at" <= '2025-10-06 11:52:00.273529' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:52:07 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "final_status_at" <= '2025-10-06 11:52:00.273529' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 11:52:08 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 11:52:08 INFO: data from database stored successfully
2025-10-06 11:52:08 INFO: Database query executed successfully
2025-10-06 11:52:08 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:52:08 INFO: context stored successfully
2025-10-06 11:52:09 INFO: context stored successfully
2025-10-06 11:52:09 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:52:09 INFO: 127.0.0.1 - - [06/Oct/2025 11:52:09] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:53:40 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\datetime.py', reloading
2025-10-06 11:53:40 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\_pydatetime.py', reloading
2025-10-06 11:53:41 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:53:49 WARNING:  * Debugger is active!
2025-10-06 11:53:49 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:54:11 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:54:11 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 11:54:12 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:54:20 WARNING:  * Debugger is active!
2025-10-06 11:54:20 INFO:  * Debugger PIN: 115-265-433
2025-10-06 11:54:24 INFO: --------------------------Received user message: who delivered it--------------------------
2025-10-06 11:54:24 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 11:54:25 INFO: context fetched successfully
2025-10-06 11:54:25 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 11:54:26 INFO: intent classified
2025-10-06 11:54:26 INFO: general
2025-10-06 11:54:26 INFO: Classified intent: general
2025-10-06 11:54:26 INFO: Processing general intent
2025-10-06 11:54:28 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 11:54:29 INFO: 127.0.0.1 - - [06/Oct/2025 11:54:29] "POST /process-data HTTP/1.1" 200 -
2025-10-06 11:56:23 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:56:23 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 11:56:24 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 11:56:32 WARNING:  * Debugger is active!
2025-10-06 11:56:32 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:01:35 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\this.py', reloading
2025-10-06 12:01:36 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:01:43 WARNING:  * Debugger is active!
2025-10-06 12:01:43 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:03:36 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\intent_classifier.py', reloading
2025-10-06 12:03:36 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\intent_classifier.py', reloading
2025-10-06 12:03:36 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\intent_classifier.py', reloading
2025-10-06 12:03:37 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:03:44 WARNING:  * Debugger is active!
2025-10-06 12:03:44 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:03:50 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 12:03:50 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:03:51 INFO: context fetched successfully
2025-10-06 12:03:51 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 12:03:54 INFO: intent classified
2025-10-06 12:03:54 INFO: data_fetch
2025-10-06 12:03:54 INFO: Classified intent: data_fetch
2025-10-06 12:03:54 INFO: db_data fetched for followup
2025-10-06 12:03:55 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:03:56 INFO: Generated SQL query: new_question
2025-10-06 12:03:56 INFO: Is followup question: new_question
2025-10-06 12:03:56 INFO: Processing data fetch intent
2025-10-06 12:03:56 INFO: Started SQL generation
2025-10-06 12:04:00 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:04:01 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 12:04:01 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 12:04:06 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 12:04:06 INFO: data from database stored successfully
2025-10-06 12:04:06 INFO: Database query executed successfully
2025-10-06 12:04:08 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:04:09 INFO: context stored successfully
2025-10-06 12:04:09 INFO: context stored successfully
2025-10-06 12:04:09 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:04:09 INFO: 127.0.0.1 - - [06/Oct/2025 12:04:09] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:04:35 INFO: --------------------------Received user message: whoe delivered it--------------------------
2025-10-06 12:04:35 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:04:35 INFO: context fetched successfully
2025-10-06 12:04:35 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 12:04:37 INFO: intent classified
2025-10-06 12:04:37 INFO: data_fetch
2025-10-06 12:04:37 INFO: Classified intent: data_fetch
2025-10-06 12:04:37 INFO: db_data fetched for followup
2025-10-06 12:04:39 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:04:40 INFO: Generated SQL query: new_question
2025-10-06 12:04:40 INFO: Is followup question: new_question
2025-10-06 12:04:40 INFO: Processing data fetch intent
2025-10-06 12:04:40 INFO: Started SQL generation
2025-10-06 12:04:41 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:04:41 INFO: Generated SQL query: SELECT "captain_name" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "id" = 1823358 AND "order_status" = 'Delivered' LIMIT 1;
2025-10-06 12:04:41 INFO: SQL generation success: SELECT "captain_name" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "id" = 1823358 AND "order_status" = 'Delivered' LIMIT 1;
2025-10-06 12:04:42 INFO: Database fetching successful: [
  {
    "captain_name": "Hafez Yahya - JED - JOD11"
  }
]
2025-10-06 12:04:42 INFO: data from database stored successfully
2025-10-06 12:04:42 INFO: Database query executed successfully
2025-10-06 12:04:43 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:04:44 INFO: context stored successfully
2025-10-06 12:04:44 INFO: context stored successfully
2025-10-06 12:04:44 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:04:44 INFO: 127.0.0.1 - - [06/Oct/2025 12:04:44] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:10:31 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 12:10:31 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 12:10:31 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:10:49 WARNING:  * Debugger is active!
2025-10-06 12:10:49 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:11:23 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 12:11:23 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 12:11:25 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:11:31 WARNING:  * Debugger is active!
2025-10-06 12:11:31 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:11:32 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 12:11:32 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:11:33 INFO: context fetched successfully
2025-10-06 12:11:33 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}, {'role': 'user', 'content': 'whoe delivered it'}, {'role': 'assistant', 'content': 'Hafez Yahya - JED - JOD11 delivered it.'}]
2025-10-06 12:11:34 INFO: intent classified
2025-10-06 12:11:34 INFO: data_fetch
2025-10-06 12:11:34 INFO: Classified intent: data_fetch
2025-10-06 12:11:34 INFO: db_data fetched for followup
2025-10-06 12:11:35 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-10-06 12:11:36 ERROR: Follow-up classifier error: Error code: 400 - {'error': {'message': 'Provider returned error', 'code': 400, 'metadata': {'raw': '{\n  "error": {\n    "message": "Invalid \'max_output_tokens\': integer below minimum value. Expected a value >= 16, but got 2 instead.",\n    "type": "invalid_request_error",\n    "param": "max_output_tokens",\n    "code": "integer_below_min_value"\n  }\n}', 'provider_name': 'OpenAI'}}, 'user_id': 'user_32XnM3UiGpUnpInAt6SOPlWP0HW'}
Traceback (most recent call last):
  File "C:\Users\USER\Desktop\LEAJLAK\beta\patch3\ai-assistant\function.py", line 420, in classify_followup
    response = client.chat.completions.create(
        model="openai/gpt-4.1-mini",
    ...<5 lines>...
        temperature=0.0,
    )
  File "C:\Users\USER\AppData\Local\Programs\Python\Python313\Lib\site-packages\openai\_utils\_utils.py", line 287, in wrapper
    return func(*args, **kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python313\Lib\site-packages\openai\resources\chat\completions\completions.py", line 1147, in create
    return self._post(
           ~~~~~~~~~~^
        "/chat/completions",
        ^^^^^^^^^^^^^^^^^^^^
    ...<46 lines>...
        stream_cls=Stream[ChatCompletionChunk],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\USER\AppData\Local\Programs\Python\Python313\Lib\site-packages\openai\_base_client.py", line 1259, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\USER\AppData\Local\Programs\Python\Python313\Lib\site-packages\openai\_base_client.py", line 1047, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'Provider returned error', 'code': 400, 'metadata': {'raw': '{\n  "error": {\n    "message": "Invalid \'max_output_tokens\': integer below minimum value. Expected a value >= 16, but got 2 instead.",\n    "type": "invalid_request_error",\n    "param": "max_output_tokens",\n    "code": "integer_below_min_value"\n  }\n}', 'provider_name': 'OpenAI'}}, 'user_id': 'user_32XnM3UiGpUnpInAt6SOPlWP0HW'}
2025-10-06 12:11:36 INFO: Is followup question: new_question
2025-10-06 12:11:36 INFO: Processing data fetch intent
2025-10-06 12:11:36 INFO: Started SQL generation
2025-10-06 12:11:37 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:11:38 INFO: Generated SQL query: SELECT "id" AS latest_order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 12:11:38 INFO: SQL generation success: SELECT "id" AS latest_order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 12:11:39 INFO: Database fetching successful: [
  {
    "latest_order_number": 1823358
  }
]
2025-10-06 12:11:39 INFO: data from database stored successfully
2025-10-06 12:11:39 INFO: Database query executed successfully
2025-10-06 12:11:40 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:11:41 INFO: context stored successfully
2025-10-06 12:11:41 INFO: context stored successfully
2025-10-06 12:11:41 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:11:41 INFO: 127.0.0.1 - - [06/Oct/2025 12:11:41] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:12:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 12:12:55 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:13:06 WARNING:  * Debugger is active!
2025-10-06 12:13:06 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:13:07 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 12:13:07 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:13:08 INFO: context fetched successfully
2025-10-06 12:13:08 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'user', 'content': 'whoe delivered it'}, {'role': 'assistant', 'content': 'Hafez Yahya - JED - JOD11 delivered it.'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 12:13:13 INFO: intent classified
2025-10-06 12:13:13 INFO: data_fetch
2025-10-06 12:13:13 INFO: Classified intent: data_fetch
2025-10-06 12:13:13 INFO: db_data fetched for followup
2025-10-06 12:13:14 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:13:15 INFO: Follow-up classification: followup
2025-10-06 12:13:15 INFO: Is followup question: followup
2025-10-06 12:13:15 ERROR: Error in followup classification: module 'function' has no attribute '_handle_followup_question'
2025-10-06 12:13:15 INFO: Started SQL generation
2025-10-06 12:13:19 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:13:19 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 12:13:19 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 12:13:20 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 12:13:20 INFO: data from database stored successfully
2025-10-06 12:13:20 INFO: Database query executed successfully
2025-10-06 12:13:21 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:13:21 INFO: context stored successfully
2025-10-06 12:13:21 INFO: context stored successfully
2025-10-06 12:13:21 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:13:21 INFO: 127.0.0.1 - - [06/Oct/2025 12:13:21] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:15:49 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:15:49 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:15:51 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:15:58 WARNING:  * Debugger is active!
2025-10-06 12:15:58 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:15:58 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 12:15:58 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:15:59 INFO: context fetched successfully
2025-10-06 12:15:59 INFO: Context retrieved: [{'role': 'user', 'content': 'whoe delivered it'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 12:16:00 INFO: intent classified
2025-10-06 12:16:00 INFO: data_fetch
2025-10-06 12:16:00 INFO: Classified intent: data_fetch
2025-10-06 12:16:00 INFO: db_data fetched for followup
2025-10-06 12:16:02 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:16:02 INFO: Follow-up classification: followup
2025-10-06 12:16:02 INFO: Is followup question: followup
2025-10-06 12:16:02 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:16:03 INFO: Follow-up classification: followup
2025-10-06 12:16:03 INFO: 127.0.0.1 - - [06/Oct/2025 12:16:03] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:25:58 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py', reloading
2025-10-06 12:26:00 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:26:12 WARNING:  * Debugger is active!
2025-10-06 12:26:12 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:26:12 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:26:12 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:26:13 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:26:21 WARNING:  * Debugger is active!
2025-10-06 12:26:21 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:26:21 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 12:26:21 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:26:22 INFO: context fetched successfully
2025-10-06 12:26:22 INFO: Context retrieved: [{'role': 'user', 'content': 'whoe delivered it'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 12:26:24 INFO: intent classified
2025-10-06 12:26:24 INFO: data_fetch
2025-10-06 12:26:24 INFO: Classified intent: data_fetch
2025-10-06 12:26:24 INFO: db_data fetched for followup
2025-10-06 12:26:25 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:26:26 INFO: Follow-up classification: followup
2025-10-06 12:26:26 INFO: Is followup question: followup
2025-10-06 12:26:26 ERROR: Error in followup classification: module 'function' has no attribute 'followup_response'
2025-10-06 12:26:26 INFO: Started SQL generation
2025-10-06 12:26:27 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:26:28 INFO: Generated SQL query: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 12:26:28 INFO: SQL generation success: SELECT "id" AS order_number FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 12:26:29 INFO: Database fetching successful: [
  {
    "order_number": 1823358
  }
]
2025-10-06 12:26:29 INFO: data from database stored successfully
2025-10-06 12:26:29 INFO: Database query executed successfully
2025-10-06 12:26:30 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:26:31 INFO: context stored successfully
2025-10-06 12:26:31 INFO: context stored successfully
2025-10-06 12:26:31 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:26:31 INFO: 127.0.0.1 - - [06/Oct/2025 12:26:31] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:26:46 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:26:46 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:26:47 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:26:55 WARNING:  * Debugger is active!
2025-10-06 12:26:55 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:27:52 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 12:27:52 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:27:52 INFO: context fetched successfully
2025-10-06 12:27:52 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 12:27:55 INFO: intent classified
2025-10-06 12:27:55 INFO: data_fetch
2025-10-06 12:27:55 INFO: Classified intent: data_fetch
2025-10-06 12:27:55 INFO: db_data fetched for followup
2025-10-06 12:27:56 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:27:57 INFO: Follow-up classification: followup
2025-10-06 12:27:57 INFO: Is followup question: followup
2025-10-06 12:27:59 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:27:59 INFO: Followup response generated: The order number of the latest order is 1823358....
2025-10-06 12:27:59 INFO: context stored successfully
2025-10-06 12:27:59 INFO: context stored successfully
2025-10-06 12:27:59 INFO: Followup context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:27:59 INFO: 127.0.0.1 - - [06/Oct/2025 12:27:59] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:29:07 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 12:29:07 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 12:29:07 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 12:29:08 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:29:15 WARNING:  * Debugger is active!
2025-10-06 12:29:15 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:29:15 INFO: --------------------------Received user message: what is the order number of latest order--------------------------
2025-10-06 12:29:15 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:29:15 INFO: context fetched successfully
2025-10-06 12:29:15 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 12:29:17 INFO: intent classified
2025-10-06 12:29:17 INFO: data_fetch
2025-10-06 12:29:17 INFO: Classified intent: data_fetch
2025-10-06 12:29:17 INFO: db_data fetched for followup
2025-10-06 12:29:19 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:29:19 INFO: Follow-up classification: followup
2025-10-06 12:29:19 INFO: Is followup question: followup
2025-10-06 12:29:20 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:29:20 INFO: Followup response generated: The order number of the latest order is 1823358....
2025-10-06 12:29:20 INFO: context stored successfully
2025-10-06 12:29:20 INFO: context stored successfully
2025-10-06 12:29:21 INFO: Followup context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:29:21 INFO: 127.0.0.1 - - [06/Oct/2025 12:29:21] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:29:30 INFO: --------------------------Received user message: who delivered it--------------------------
2025-10-06 12:29:30 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:29:30 INFO: context fetched successfully
2025-10-06 12:29:30 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}]
2025-10-06 12:29:32 INFO: intent classified
2025-10-06 12:29:32 INFO: data_fetch
2025-10-06 12:29:32 INFO: Classified intent: data_fetch
2025-10-06 12:29:32 INFO: db_data fetched for followup
2025-10-06 12:29:33 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:29:33 INFO: Follow-up classification: followup
2025-10-06 12:29:33 INFO: Is followup question: followup
2025-10-06 12:29:35 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:29:35 INFO: Followup response generated: The delivery information for order #1823358 is not available in the provided data....
2025-10-06 12:29:35 INFO: context stored successfully
2025-10-06 12:29:35 INFO: context stored successfully
2025-10-06 12:29:35 INFO: Followup context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:29:35 INFO: 127.0.0.1 - - [06/Oct/2025 12:29:35] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:29:54 INFO: --------------------------Received user message: who delivered the order id 1823358--------------------------
2025-10-06 12:29:54 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:29:55 INFO: context fetched successfully
2025-10-06 12:29:55 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'assistant', 'content': 'The order number of the latest order is 1823358.'}, {'role': 'user', 'content': 'who delivered it'}, {'role': 'assistant', 'content': 'The delivery information for order #1823358 is not available in the provided data.'}]
2025-10-06 12:29:56 INFO: intent classified
2025-10-06 12:29:56 INFO: data_fetch
2025-10-06 12:29:56 INFO: Classified intent: data_fetch
2025-10-06 12:29:56 INFO: db_data fetched for followup
2025-10-06 12:29:57 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:29:57 INFO: Follow-up classification: followup
2025-10-06 12:29:57 INFO: Is followup question: followup
2025-10-06 12:29:58 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:29:59 INFO: Followup response generated: The delivery information for order #1823358 is not available in the provided data....
2025-10-06 12:29:59 INFO: context stored successfully
2025-10-06 12:29:59 INFO: context stored successfully
2025-10-06 12:29:59 INFO: Followup context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:29:59 INFO: 127.0.0.1 - - [06/Oct/2025 12:29:59] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:32:46 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:32:46 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:32:47 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:32:55 WARNING:  * Debugger is active!
2025-10-06 12:32:55 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:32:55 INFO: --------------------------Received user message: who delivered the order id 1823358--------------------------
2025-10-06 12:32:55 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:32:55 INFO: context fetched successfully
2025-10-06 12:32:55 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the order number of latest order'}, {'role': 'user', 'content': 'who delivered it'}, {'role': 'assistant', 'content': 'The delivery information for order #1823358 is not available in the provided data.'}, {'role': 'user', 'content': 'who delivered the order id 1823358'}, {'role': 'assistant', 'content': 'The delivery information for order #1823358 is not available in the provided data.'}]
2025-10-06 12:32:57 INFO: intent classified
2025-10-06 12:32:57 INFO: data_fetch
2025-10-06 12:32:57 INFO: Classified intent: data_fetch
2025-10-06 12:32:57 INFO: Started SQL generation
2025-10-06 12:33:02 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:33:02 INFO: Generated SQL query: SELECT "captain_name" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "id" = 1823358 LIMIT 1;
2025-10-06 12:33:02 INFO: SQL generation success: SELECT "captain_name" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "id" = 1823358 LIMIT 1;
2025-10-06 12:33:03 INFO: Database fetching successful: [
  {
    "captain_name": "Hafez Yahya - JED - JOD11"
  }
]
2025-10-06 12:33:03 INFO: data from database stored successfully
2025-10-06 12:33:03 INFO: Database query executed successfully
2025-10-06 12:33:04 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:33:05 INFO: context stored successfully
2025-10-06 12:33:05 INFO: context stored successfully
2025-10-06 12:33:05 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:33:05 INFO: 127.0.0.1 - - [06/Oct/2025 12:33:05] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:33:24 INFO: --------------------------Received user message: what is the total number of orders in july--------------------------
2025-10-06 12:33:24 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:33:24 INFO: context fetched successfully
2025-10-06 12:33:24 INFO: Context retrieved: [{'role': 'user', 'content': 'who delivered it'}, {'role': 'user', 'content': 'who delivered the order id 1823358'}, {'role': 'assistant', 'content': 'The delivery information for order #1823358 is not available in the provided data.'}, {'role': 'user', 'content': 'who delivered the order id 1823358'}, {'role': 'assistant', 'content': 'Hafez Yahya - JED - JOD11 delivered order ID 1823358.'}]
2025-10-06 12:33:25 INFO: intent classified
2025-10-06 12:33:25 INFO: data_fetch
2025-10-06 12:33:25 INFO: Classified intent: data_fetch
2025-10-06 12:33:25 INFO: Started SQL generation
2025-10-06 12:33:26 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:33:27 INFO: Generated SQL query: SELECT COUNT(*) AS total_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(MONTH FROM "order_created_at") = 7 AND EXTRACT(YEAR FROM "order_created_at") = 2025 LIMIT 1;
2025-10-06 12:33:27 INFO: SQL generation success: SELECT COUNT(*) AS total_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(MONTH FROM "order_created_at") = 7 AND EXTRACT(YEAR FROM "order_created_at") = 2025 LIMIT 1;
2025-10-06 12:33:28 INFO: Database fetching successful: [
  {
    "total_orders": 8926
  }
]
2025-10-06 12:33:28 INFO: data from database stored successfully
2025-10-06 12:33:28 INFO: Database query executed successfully
2025-10-06 12:33:28 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:33:29 INFO: context stored successfully
2025-10-06 12:33:29 INFO: context stored successfully
2025-10-06 12:33:29 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:33:29 INFO: 127.0.0.1 - - [06/Oct/2025 12:33:29] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:33:41 INFO: --------------------------Received user message: how many of them are delivered ?--------------------------
2025-10-06 12:33:41 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:33:41 INFO: context fetched successfully
2025-10-06 12:33:41 INFO: Context retrieved: [{'role': 'user', 'content': 'who delivered the order id 1823358'}, {'role': 'user', 'content': 'who delivered the order id 1823358'}, {'role': 'assistant', 'content': 'Hafez Yahya - JED - JOD11 delivered order ID 1823358.'}, {'role': 'user', 'content': 'what is the total number of orders in july'}, {'role': 'assistant', 'content': 'Total number of orders in July: 8926'}]
2025-10-06 12:33:42 INFO: intent classified
2025-10-06 12:33:42 INFO: data_fetch
2025-10-06 12:33:42 INFO: Classified intent: data_fetch
2025-10-06 12:33:42 INFO: Started SQL generation
2025-10-06 12:33:45 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:33:46 INFO: Generated SQL query: SELECT COUNT(*) AS delivered_count FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' LIMIT 1;
2025-10-06 12:33:46 INFO: SQL generation success: SELECT COUNT(*) AS delivered_count FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' LIMIT 1;
2025-10-06 12:33:48 INFO: Database fetching successful: [
  {
    "delivered_count": 10555
  }
]
2025-10-06 12:33:48 INFO: data from database stored successfully
2025-10-06 12:33:48 INFO: Database query executed successfully
2025-10-06 12:33:50 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:33:50 INFO: context stored successfully
2025-10-06 12:33:50 INFO: context stored successfully
2025-10-06 12:33:50 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:33:50 INFO: 127.0.0.1 - - [06/Oct/2025 12:33:50] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:34:02 INFO: --------------------------Received user message: in july?--------------------------
2025-10-06 12:34:02 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:34:02 INFO: context fetched successfully
2025-10-06 12:34:02 INFO: Context retrieved: [{'role': 'user', 'content': 'who delivered the order id 1823358'}, {'role': 'user', 'content': 'what is the total number of orders in july'}, {'role': 'assistant', 'content': 'Total number of orders in July: 8926'}, {'role': 'user', 'content': 'how many of them are delivered ?'}, {'role': 'assistant', 'content': '10555 orders are delivered.'}]
2025-10-06 12:34:03 INFO: intent classified
2025-10-06 12:34:03 INFO: data_fetch
2025-10-06 12:34:03 INFO: Classified intent: data_fetch
2025-10-06 12:34:03 INFO: Started SQL generation
2025-10-06 12:34:06 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:34:07 INFO: Generated SQL query: SELECT COUNT(*) AS july_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(MONTH FROM "order_created_at") = 7 AND EXTRACT(YEAR FROM "order_created_at") = 2025 LIMIT 1;
2025-10-06 12:34:07 INFO: SQL generation success: SELECT COUNT(*) AS july_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(MONTH FROM "order_created_at") = 7 AND EXTRACT(YEAR FROM "order_created_at") = 2025 LIMIT 1;
2025-10-06 12:34:08 INFO: Database fetching successful: [
  {
    "july_orders": 8926
  }
]
2025-10-06 12:34:08 INFO: data from database stored successfully
2025-10-06 12:34:08 INFO: Database query executed successfully
2025-10-06 12:34:09 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:34:09 INFO: context stored successfully
2025-10-06 12:34:09 INFO: context stored successfully
2025-10-06 12:34:09 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:34:09 INFO: 127.0.0.1 - - [06/Oct/2025 12:34:09] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:36:14 INFO: --------------------------Received user message: total delivered orders from july--------------------------
2025-10-06 12:36:14 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:36:14 INFO: context fetched successfully
2025-10-06 12:36:14 INFO: Context retrieved: [{'role': 'user', 'content': 'what is the total number of orders in july'}, {'role': 'user', 'content': 'how many of them are delivered ?'}, {'role': 'assistant', 'content': '10555 orders are delivered.'}, {'role': 'user', 'content': 'in july?'}, {'role': 'assistant', 'content': 'Total number of orders in July: 8926'}]
2025-10-06 12:36:17 INFO: intent classified
2025-10-06 12:36:17 INFO: data_fetch
2025-10-06 12:36:17 INFO: Classified intent: data_fetch
2025-10-06 12:36:17 INFO: Started SQL generation
2025-10-06 12:36:20 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:36:21 INFO: Generated SQL query: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND DATE_TRUNC('month', "order_created_at") = '2024-07-01' LIMIT 1;
2025-10-06 12:36:21 INFO: SQL generation success: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND DATE_TRUNC('month', "order_created_at") = '2024-07-01' LIMIT 1;
2025-10-06 12:36:22 INFO: Database fetching successful: [
  {
    "delivered_orders": 0
  }
]
2025-10-06 12:36:22 INFO: data from database stored successfully
2025-10-06 12:36:22 INFO: Database query executed successfully
2025-10-06 12:36:23 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:36:23 INFO: context stored successfully
2025-10-06 12:36:23 INFO: context stored successfully
2025-10-06 12:36:23 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:36:23 INFO: 127.0.0.1 - - [06/Oct/2025 12:36:23] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:38:41 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:38:41 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:38:41 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:38:42 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:38:49 WARNING:  * Debugger is active!
2025-10-06 12:38:49 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:38:49 INFO: --------------------------Received user message: total delivered orders from july--------------------------
2025-10-06 12:38:49 INFO: Session ID: 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:38:50 INFO: context fetched successfully
2025-10-06 12:38:50 INFO: Context retrieved: [{'role': 'user', 'content': 'how many of them are delivered ?'}, {'role': 'user', 'content': 'in july?'}, {'role': 'assistant', 'content': 'Total number of orders in July: 8926'}, {'role': 'user', 'content': 'total delivered orders from july'}, {'role': 'assistant', 'content': '10555 orders are delivered.'}]
2025-10-06 12:38:52 INFO: intent classified
2025-10-06 12:38:52 INFO: data_fetch
2025-10-06 12:38:52 INFO: Classified intent: data_fetch
2025-10-06 12:38:52 INFO: Started SQL generation
2025-10-06 12:38:56 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:38:57 INFO: Generated SQL query: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND "final_status_at" >= '2025-07-01' AND "final_status_at" < '2025-08-01' LIMIT 1;
2025-10-06 12:38:57 INFO: SQL generation success: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND "final_status_at" >= '2025-07-01' AND "final_status_at" < '2025-08-01' LIMIT 1;
2025-10-06 12:39:01 INFO: Database fetching successful: [
  {
    "delivered_orders": 8686
  }
]
2025-10-06 12:39:01 INFO: data from database stored successfully
2025-10-06 12:39:01 INFO: Database query executed successfully
2025-10-06 12:39:02 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:39:03 INFO: context stored successfully
2025-10-06 12:39:03 INFO: context stored successfully
2025-10-06 12:39:03 INFO: Context stored for session 03df6f6a-61db-42e3-8a7d-7bd657a16141
2025-10-06 12:39:03 INFO: 127.0.0.1 - - [06/Oct/2025 12:39:03] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:39:14 INFO: 127.0.0.1 - - [06/Oct/2025 12:39:14] "GET / HTTP/1.1" 200 -
2025-10-06 12:39:14 INFO: 127.0.0.1 - - [06/Oct/2025 12:39:14] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 12:39:17 INFO: New session started: 307a84c5-0163-4fe2-b9a2-23a6b1372afe
2025-10-06 12:39:17 INFO: Received request data: {'mobile': '918921729081'}
2025-10-06 12:39:17 INFO: Updated mobile: 918921729081
2025-10-06 12:39:17 INFO: Updated name: MC DONALDS
2025-10-06 12:39:17 INFO: 127.0.0.1 - - [06/Oct/2025 12:39:17] "POST /number HTTP/1.1" 200 -
2025-10-06 12:39:18 INFO: 127.0.0.1 - - [06/Oct/2025 12:39:18] "POST /names HTTP/1.1" 200 -
2025-10-06 12:39:28 INFO: --------------------------Received user message: total delivered orders in july--------------------------
2025-10-06 12:39:28 INFO: Session ID: 307a84c5-0163-4fe2-b9a2-23a6b1372afe
2025-10-06 12:39:28 INFO: context fetched successfully
2025-10-06 12:39:28 INFO: Context retrieved: []
2025-10-06 12:39:32 INFO: intent classified
2025-10-06 12:39:32 INFO: data_fetch
2025-10-06 12:39:32 INFO: Classified intent: data_fetch
2025-10-06 12:39:32 INFO: Started SQL generation
2025-10-06 12:39:33 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:39:34 INFO: Generated SQL query: SELECT COUNT(*) AS total_delivered FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_status" = 'Delivered' AND DATE_TRUNC('month', "final_status_at") = '2025-07-01' LIMIT 1;
2025-10-06 12:39:34 INFO: SQL generation success: SELECT COUNT(*) AS total_delivered FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_status" = 'Delivered' AND DATE_TRUNC('month', "final_status_at") = '2025-07-01' LIMIT 1;
2025-10-06 12:39:35 INFO: Database fetching successful: [
  {
    "total_delivered": 12094
  }
]
2025-10-06 12:39:35 INFO: data from database stored successfully
2025-10-06 12:39:35 INFO: Database query executed successfully
2025-10-06 12:39:36 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:39:37 INFO: context stored successfully
2025-10-06 12:39:37 INFO: context stored successfully
2025-10-06 12:39:37 INFO: Context stored for session 307a84c5-0163-4fe2-b9a2-23a6b1372afe
2025-10-06 12:39:37 INFO: 127.0.0.1 - - [06/Oct/2025 12:39:37] "POST /process-data HTTP/1.1" 200 -
2025-10-06 12:39:45 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:39:45 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:39:45 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 12:39:46 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 12:39:53 WARNING:  * Debugger is active!
2025-10-06 12:39:53 INFO:  * Debugger PIN: 115-265-433
2025-10-06 12:39:54 INFO: --------------------------------------------------------------------------Received user message: total delivered orders in july--------------------------------------------------------------------------
2025-10-06 12:39:54 INFO: Session ID: 307a84c5-0163-4fe2-b9a2-23a6b1372afe
2025-10-06 12:39:55 INFO: context fetched successfully
2025-10-06 12:39:55 INFO: Context retrieved: [{'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'assistant', 'content': 'Total delivered orders in July: 12094.'}]
2025-10-06 12:39:57 INFO: intent classified
2025-10-06 12:39:57 INFO: data_fetch
2025-10-06 12:39:57 INFO: Classified intent: data_fetch
2025-10-06 12:39:57 INFO: Started SQL generation
2025-10-06 12:40:00 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:40:02 INFO: Generated SQL query: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_status" = 'Delivered' AND EXTRACT(MONTH FROM "final_status_at") = 7 AND EXTRACT(YEAR FROM "final_status_at") = 2025 LIMIT 1;
2025-10-06 12:40:02 INFO: SQL generation success: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_status" = 'Delivered' AND EXTRACT(MONTH FROM "final_status_at") = 7 AND EXTRACT(YEAR FROM "final_status_at") = 2025 LIMIT 1;
2025-10-06 12:40:02 INFO: Database fetching successful: [
  {
    "delivered_orders": 12094
  }
]
2025-10-06 12:40:02 INFO: data from database stored successfully
2025-10-06 12:40:02 INFO: Database query executed successfully
2025-10-06 12:40:04 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 12:40:04 INFO: context stored successfully
2025-10-06 12:40:04 INFO: context stored successfully
2025-10-06 12:40:04 INFO: Context stored for session 307a84c5-0163-4fe2-b9a2-23a6b1372afe
2025-10-06 12:40:04 INFO: 127.0.0.1 - - [06/Oct/2025 12:40:04] "POST /process-data HTTP/1.1" 200 -
2025-10-06 13:05:12 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\intent_classifier.py', reloading
2025-10-06 13:05:13 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 13:05:26 WARNING:  * Debugger is active!
2025-10-06 13:05:26 INFO:  * Debugger PIN: 115-265-433
2025-10-06 13:29:12 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 13:29:12 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 13:29:19 WARNING:  * Debugger is active!
2025-10-06 13:29:19 INFO:  * Debugger PIN: 115-265-433
2025-10-06 13:41:12 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 13:41:13 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 13:41:19 WARNING:  * Debugger is active!
2025-10-06 13:41:19 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:02:31 INFO: 127.0.0.1 - - [06/Oct/2025 14:02:31] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-10-06 14:04:41 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\json\\__init__.py', reloading
2025-10-06 14:04:43 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 14:04:56 WARNING:  * Debugger is active!
2025-10-06 14:04:56 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:05:02 INFO: --------------------------------------------------------------------------Received user message: total delivered orders in july--------------------------------------------------------------------------
2025-10-06 14:05:02 INFO: Session ID: 307a84c5-0163-4fe2-b9a2-23a6b1372afe
2025-10-06 14:05:03 INFO: context fetched successfully
2025-10-06 14:05:03 INFO: Context retrieved: [{'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'assistant', 'content': 'Total delivered orders in July: 12094.'}, {'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'assistant', 'content': 'Total delivered orders in July: 12094.'}]
2025-10-06 14:05:06 INFO: intent classified
2025-10-06 14:05:06 INFO: data_fetch
2025-10-06 14:05:06 INFO: Classified intent: data_fetch
2025-10-06 14:05:06 INFO: Started SQL generation
2025-10-06 14:05:10 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:05:11 INFO: Generated SQL query: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_status" = 'Delivered' AND DATE_TRUNC('month', "final_status_at") = DATE '2025-07-01' LIMIT 1;
2025-10-06 14:05:11 INFO: SQL generation success: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'MC DONALDS' AND "order_status" = 'Delivered' AND DATE_TRUNC('month', "final_status_at") = DATE '2025-07-01' LIMIT 1;
2025-10-06 14:05:12 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\intent_classifier.py', reloading
2025-10-06 14:05:13 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 14:05:20 WARNING:  * Debugger is active!
2025-10-06 14:05:20 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:06:32 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-06 14:06:32 INFO: [33mPress CTRL+C to quit[0m
2025-10-06 14:06:32 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 14:06:40 WARNING:  * Debugger is active!
2025-10-06 14:06:40 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:06:40 INFO: 127.0.0.1 - - [06/Oct/2025 14:06:40] "GET / HTTP/1.1" 200 -
2025-10-06 14:06:40 INFO: 127.0.0.1 - - [06/Oct/2025 14:06:40] "GET / HTTP/1.1" 200 -
2025-10-06 14:06:40 INFO: 127.0.0.1 - - [06/Oct/2025 14:06:40] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-10-06 14:06:40 INFO: 127.0.0.1 - - [06/Oct/2025 14:06:40] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 14:06:41 INFO: 127.0.0.1 - - [06/Oct/2025 14:06:41] "GET / HTTP/1.1" 200 -
2025-10-06 14:06:41 INFO: 127.0.0.1 - - [06/Oct/2025 14:06:41] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 14:06:41 INFO: 127.0.0.1 - - [06/Oct/2025 14:06:41] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-10-06 14:06:41 INFO: 127.0.0.1 - - [06/Oct/2025 14:06:41] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-10-06 14:07:09 INFO: New session started: 203c8c96-bc80-4ac6-a664-5a27bb5fe805
2025-10-06 14:07:09 INFO: Received request data: {'mobile': '919562301314'}
2025-10-06 14:07:09 INFO: Updated mobile: 919562301314
2025-10-06 14:07:10 INFO: Updated name: Dominos Pizza
2025-10-06 14:07:10 INFO: 127.0.0.1 - - [06/Oct/2025 14:07:10] "POST /number HTTP/1.1" 200 -
2025-10-06 14:07:10 INFO: 127.0.0.1 - - [06/Oct/2025 14:07:10] "POST /names HTTP/1.1" 200 -
2025-10-06 14:07:16 INFO: --------------------------------------------------------------------------Received user message: total delivered orders in july--------------------------------------------------------------------------
2025-10-06 14:07:16 INFO: Session ID: 203c8c96-bc80-4ac6-a664-5a27bb5fe805
2025-10-06 14:07:17 INFO: context fetched successfully
2025-10-06 14:07:17 INFO: Context retrieved: []
2025-10-06 14:07:19 INFO: intent classified
2025-10-06 14:07:19 INFO: data_fetch
2025-10-06 14:07:19 INFO: Classified intent: data_fetch
2025-10-06 14:07:19 INFO: Started SQL generation
2025-10-06 14:07:23 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:07:24 INFO: Generated SQL query: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND DATE_TRUNC('month', "final_status_at") = '2025-07-01' LIMIT 1;
2025-10-06 14:07:24 INFO: SQL generation success: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND DATE_TRUNC('month', "final_status_at") = '2025-07-01' LIMIT 1;
2025-10-06 14:07:28 INFO: Database fetching successful: [
  {
    "delivered_orders": 8686
  }
]
2025-10-06 14:07:28 INFO: data from database stored successfully
2025-10-06 14:07:28 INFO: Database query executed successfully
2025-10-06 14:07:30 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:07:30 INFO: context stored successfully
2025-10-06 14:07:30 INFO: context stored successfully
2025-10-06 14:07:30 INFO: Context stored for session 203c8c96-bc80-4ac6-a664-5a27bb5fe805
2025-10-06 14:07:30 INFO: 127.0.0.1 - - [06/Oct/2025 14:07:30] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:08:54 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 14:08:54 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 14:08:54 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 14:08:55 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 14:09:02 WARNING:  * Debugger is active!
2025-10-06 14:09:02 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:09:02 INFO: --------------------------------------------------------------------------Received user message: total delivered orders in july--------------------------------------------------------------------------
2025-10-06 14:09:02 INFO: Session ID: 203c8c96-bc80-4ac6-a664-5a27bb5fe805
2025-10-06 14:09:02 INFO: context fetched successfully
2025-10-06 14:09:02 INFO: Context retrieved: [{'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'assistant', 'content': '8686 orders delivered in July.'}]
2025-10-06 14:09:05 INFO: intent classified
2025-10-06 14:09:05 INFO: data_fetch
2025-10-06 14:09:05 INFO: Classified intent: data_fetch
2025-10-06 14:09:05 INFO: Started SQL generation
2025-10-06 14:09:06 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:09:08 INFO: Generated SQL query: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND EXTRACT(MONTH FROM "final_status_at") = 7 AND EXTRACT(YEAR FROM "final_status_at") = 2025 LIMIT 1;
2025-10-06 14:09:08 INFO: SQL generation success: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND EXTRACT(MONTH FROM "final_status_at") = 7 AND EXTRACT(YEAR FROM "final_status_at") = 2025 LIMIT 1;
2025-10-06 14:09:13 INFO: Database fetching successful: [
  {
    "delivered_orders": 8686
  }
]
2025-10-06 14:09:13 INFO: data from database stored successfully
2025-10-06 14:09:13 INFO: Database query executed successfully
2025-10-06 14:09:15 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:09:15 INFO: context stored successfully
2025-10-06 14:09:15 INFO: context stored successfully
2025-10-06 14:09:15 INFO: Context stored for session 203c8c96-bc80-4ac6-a664-5a27bb5fe805
2025-10-06 14:09:15 INFO: 127.0.0.1 - - [06/Oct/2025 14:09:15] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:09:23 INFO: 127.0.0.1 - - [06/Oct/2025 14:09:23] "GET / HTTP/1.1" 200 -
2025-10-06 14:09:24 INFO: 127.0.0.1 - - [06/Oct/2025 14:09:24] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 14:09:24 INFO: 127.0.0.1 - - [06/Oct/2025 14:09:24] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-10-06 14:09:27 INFO: New session started: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:09:27 INFO: Received request data: {'mobile': '919562301314'}
2025-10-06 14:09:27 INFO: Updated mobile: 919562301314
2025-10-06 14:09:27 INFO: Updated name: Dominos Pizza
2025-10-06 14:09:27 INFO: 127.0.0.1 - - [06/Oct/2025 14:09:27] "POST /number HTTP/1.1" 200 -
2025-10-06 14:09:28 INFO: 127.0.0.1 - - [06/Oct/2025 14:09:28] "POST /names HTTP/1.1" 200 -
2025-10-06 14:09:30 INFO: --------------------------------------------------------------------------Received user message: total delivered orders in july--------------------------------------------------------------------------
2025-10-06 14:09:30 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:09:30 INFO: context fetched successfully
2025-10-06 14:09:30 INFO: Context retrieved: []
2025-10-06 14:09:32 INFO: intent classified
2025-10-06 14:09:32 INFO: data_fetch
2025-10-06 14:09:32 INFO: Classified intent: data_fetch
2025-10-06 14:09:32 INFO: Started SQL generation
2025-10-06 14:09:37 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:09:38 INFO: Generated SQL query: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND "final_status_at" >= '2025-07-01' AND "final_status_at" < '2025-08-01' LIMIT 1;
2025-10-06 14:09:38 INFO: SQL generation success: SELECT COUNT(*) AS delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND "final_status_at" >= '2025-07-01' AND "final_status_at" < '2025-08-01' LIMIT 1;
2025-10-06 14:09:39 INFO: Database fetching successful: [
  {
    "delivered_orders": 8686
  }
]
2025-10-06 14:09:39 INFO: data from database stored successfully
2025-10-06 14:09:39 INFO: Database query executed successfully
2025-10-06 14:09:39 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:09:40 INFO: context stored successfully
2025-10-06 14:09:40 INFO: context stored successfully
2025-10-06 14:09:40 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:09:40 INFO: 127.0.0.1 - - [06/Oct/2025 14:09:40] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:11:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 14:11:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 14:11:09 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 14:11:11 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 14:11:19 WARNING:  * Debugger is active!
2025-10-06 14:11:19 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:11:19 INFO: --------------------------------------------------------------------------Received user message: total delivered orders in july--------------------------------------------------------------------------
2025-10-06 14:11:19 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:11:20 INFO: context fetched successfully
2025-10-06 14:11:20 INFO: Context retrieved: [{'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'assistant', 'content': 'Total delivered orders in July: 8686.'}]
2025-10-06 14:11:21 INFO: intent classified
2025-10-06 14:11:21 INFO: data_fetch
2025-10-06 14:11:21 INFO: Classified intent: data_fetch
2025-10-06 14:11:21 INFO: Started SQL generation
2025-10-06 14:11:28 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:11:30 INFO: Generated SQL query: SELECT COUNT(*) AS july_delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND EXTRACT(MONTH FROM "final_status_at") = 7 AND EXTRACT(YEAR FROM "final_status_at") = 2025 LIMIT 1;
2025-10-06 14:11:30 INFO: SQL generation success: SELECT COUNT(*) AS july_delivered_orders FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND EXTRACT(MONTH FROM "final_status_at") = 7 AND EXTRACT(YEAR FROM "final_status_at") = 2025 LIMIT 1;
2025-10-06 14:11:33 INFO: Database fetching successful: [
  {
    "july_delivered_orders": 8686
  }
]
2025-10-06 14:11:33 INFO: data from database stored successfully
2025-10-06 14:11:33 INFO: Database query executed successfully
2025-10-06 14:11:34 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:11:35 INFO: context stored successfully
2025-10-06 14:11:35 INFO: context stored successfully
2025-10-06 14:11:35 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:11:35 INFO: 127.0.0.1 - - [06/Oct/2025 14:11:35] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:14:04 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\prompts.py', reloading
2025-10-06 14:14:06 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 14:14:12 WARNING:  * Debugger is active!
2025-10-06 14:14:12 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:17:29 INFO: --------------------------------------------------------------------------Received user message: Can I get the details of the order created on 2025-07-21 at 19:12:34?--------------------------------------------------------------------------
2025-10-06 14:17:29 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:17:30 INFO: context fetched successfully
2025-10-06 14:17:30 INFO: Context retrieved: [{'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'assistant', 'content': 'Total delivered orders in July: 8686.'}, {'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'assistant', 'content': 'Total delivered orders in July: 8686.'}]
2025-10-06 14:17:32 INFO: intent classified
2025-10-06 14:17:32 INFO: data_fetch
2025-10-06 14:17:32 INFO: Classified intent: data_fetch
2025-10-06 14:17:32 INFO: Started SQL generation
2025-10-06 14:17:35 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:17:36 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" = '2025-07-21 19:12:34' LIMIT 1;
2025-10-06 14:17:36 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" = '2025-07-21 19:12:34' LIMIT 1;
2025-10-06 14:17:36 INFO: Database fetching successful: []
2025-10-06 14:17:36 INFO: data from database stored successfully
2025-10-06 14:17:36 INFO: Database query executed successfully
2025-10-06 14:17:38 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:17:38 INFO: context stored successfully
2025-10-06 14:17:38 INFO: context stored successfully
2025-10-06 14:17:38 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:17:38 INFO: 127.0.0.1 - - [06/Oct/2025 14:17:38] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:17:59 INFO: --------------------------------------------------------------------------Received user message: Can you tell me all canceled orders for me?--------------------------------------------------------------------------
2025-10-06 14:17:59 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:17:59 INFO: context fetched successfully
2025-10-06 14:17:59 INFO: Context retrieved: [{'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'assistant', 'content': 'Total delivered orders in July: 8686.'}, {'role': 'user', 'content': 'Can I get the details of the order created on 2025-07-21 at 19:12:34?'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 14:18:00 INFO: intent classified
2025-10-06 14:18:00 INFO: data_fetch
2025-10-06 14:18:00 INFO: Classified intent: data_fetch
2025-10-06 14:18:00 INFO: Started SQL generation
2025-10-06 14:18:06 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:18:07 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Canceled' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 14:18:07 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Canceled' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 14:18:07 INFO: Database fetching successful: [
  {
    "id": 1822329,
    "customer_number": 6424245478,
    "customer_name": "Customer_YZA",
    "client_id": 265,
    "client_name": "Dominos Pizza",
    "captain_name": "HAMADELNEEL HAGOU - KHO - thahbeh11",
    "delivery_date": "2025-07-21T02:52:34",
    "order_status": "Canceled",
    "shop_to_delivery_km": 0.0,
    "order_created_at": "2025-07-21T02:50:34",
    "order_accepted_at": "2025-07-21T02:50:54",
    "start_ride_at": "2025-06-28T00:00:41",
    "reached_shop_at": "2025-06-28T00:00:41",
    "order_picked_at": "2025-06-28T00:00:41",
    "shipped_at": "2025-06-28T00:00:41",
    "reached_dest_at": "2025-06-28T00:00:41",
    "final_status_at": "2025-07-21T02:52:34",
    "cancellation_reason": "TEST ORDER BY LEAJLAK"
  }
]
2025-10-06 14:18:07 INFO: data from database stored successfully
2025-10-06 14:18:07 INFO: Database query executed successfully
2025-10-06 14:18:09 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:18:10 INFO: context stored successfully
2025-10-06 14:18:10 INFO: context stored successfully
2025-10-06 14:18:10 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:18:10 INFO: 127.0.0.1 - - [06/Oct/2025 14:18:10] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:18:25 INFO: --------------------------------------------------------------------------Received user message: What is the final status timestamp of my last order?--------------------------------------------------------------------------
2025-10-06 14:18:25 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:18:25 INFO: context fetched successfully
2025-10-06 14:18:25 INFO: Context retrieved: [{'role': 'user', 'content': 'total delivered orders in july'}, {'role': 'user', 'content': 'Can I get the details of the order created on 2025-07-21 at 19:12:34?'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Can you tell me all canceled orders for me?'}, {'role': 'assistant', 'content': '"client_name": "Dominos Pizza", "order_status": "Canceled", "delivery_date": "2025-07-21T02:52:34"'}]
2025-10-06 14:18:26 INFO: intent classified
2025-10-06 14:18:26 INFO: data_fetch
2025-10-06 14:18:26 INFO: Classified intent: data_fetch
2025-10-06 14:18:26 INFO: Started SQL generation
2025-10-06 14:18:27 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:18:28 INFO: Generated SQL query: SELECT "final_status_at" AS last_order_timestamp FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 14:18:28 INFO: SQL generation success: SELECT "final_status_at" AS last_order_timestamp FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 14:18:29 INFO: Database fetching successful: [
  {
    "last_order_timestamp": "2025-07-21T19:32:22"
  }
]
2025-10-06 14:18:29 INFO: data from database stored successfully
2025-10-06 14:18:29 INFO: Database query executed successfully
2025-10-06 14:18:31 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:18:31 INFO: context stored successfully
2025-10-06 14:18:31 INFO: context stored successfully
2025-10-06 14:18:31 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:18:31 INFO: 127.0.0.1 - - [06/Oct/2025 14:18:31] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:18:53 INFO: --------------------------------------------------------------------------Received user message: Which of my orders are still in Cancel Request Accepted status?--------------------------------------------------------------------------
2025-10-06 14:18:53 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:18:53 INFO: context fetched successfully
2025-10-06 14:18:53 INFO: Context retrieved: [{'role': 'user', 'content': 'Can I get the details of the order created on 2025-07-21 at 19:12:34?'}, {'role': 'user', 'content': 'Can you tell me all canceled orders for me?'}, {'role': 'assistant', 'content': '"client_name": "Dominos Pizza", "order_status": "Canceled", "delivery_date": "2025-07-21T02:52:34"'}, {'role': 'user', 'content': 'What is the final status timestamp of my last order?'}, {'role': 'assistant', 'content': 'The final status timestamp of your last order is 2025-07-21T19:32:22.'}]
2025-10-06 14:18:54 INFO: intent classified
2025-10-06 14:18:54 INFO: data_fetch
2025-10-06 14:18:54 INFO: Classified intent: data_fetch
2025-10-06 14:18:54 INFO: Started SQL generation
2025-10-06 14:18:59 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:19:00 INFO: Generated SQL query: SELECT "id", "order_status", "delivery_date", "final_status_at" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Cancel Request Accepted' AND "final_status_at" <= '2025-10-06 14:18:54.935126' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 14:19:00 INFO: SQL generation success: SELECT "id", "order_status", "delivery_date", "final_status_at" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Cancel Request Accepted' AND "final_status_at" <= '2025-10-06 14:18:54.935126' ORDER BY "final_status_at" DESC LIMIT 1;
2025-10-06 14:19:01 INFO: Database fetching successful: [
  {
    "id": 1823178,
    "order_status": "Cancel Request Accepted",
    "delivery_date": "2025-07-21T18:34:40",
    "final_status_at": "2025-07-21T18:34:40"
  }
]
2025-10-06 14:19:01 INFO: data from database stored successfully
2025-10-06 14:19:01 INFO: Database query executed successfully
2025-10-06 14:19:03 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:19:03 INFO: context stored successfully
2025-10-06 14:19:03 INFO: context stored successfully
2025-10-06 14:19:03 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:19:03 INFO: 127.0.0.1 - - [06/Oct/2025 14:19:03] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:19:20 INFO: --------------------------------------------------------------------------Received user message: Can you show me orders delivered between July 20 and July 25?--------------------------------------------------------------------------
2025-10-06 14:19:20 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:19:20 INFO: context fetched successfully
2025-10-06 14:19:20 INFO: Context retrieved: [{'role': 'user', 'content': 'Can you tell me all canceled orders for me?'}, {'role': 'user', 'content': 'What is the final status timestamp of my last order?'}, {'role': 'assistant', 'content': 'The final status timestamp of your last order is 2025-07-21T19:32:22.'}, {'role': 'user', 'content': 'Which of my orders are still in Cancel Request Accepted status?'}, {'role': 'assistant', 'content': 'Order ID 1823178 is in "Cancel Request Accepted" status.'}]
2025-10-06 14:19:23 INFO: intent classified
2025-10-06 14:19:23 INFO: data_fetch
2025-10-06 14:19:23 INFO: Classified intent: data_fetch
2025-10-06 14:19:23 INFO: Started SQL generation
2025-10-06 14:19:24 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:19:26 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND "delivery_date" >= '2025-07-20' AND "delivery_date" <= '2025-07-25' ORDER BY "delivery_date" DESC LIMIT 1;
2025-10-06 14:19:26 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND "delivery_date" >= '2025-07-20' AND "delivery_date" <= '2025-07-25' ORDER BY "delivery_date" DESC LIMIT 1;
2025-10-06 14:19:26 INFO: Database fetching successful: [
  {
    "id": 1823358,
    "customer_number": 4663190680,
    "customer_name": "Customer_QWO",
    "client_id": 265,
    "client_name": "Dominos Pizza",
    "captain_name": "Hafez Yahya - JED - JOD11",
    "delivery_date": "2025-07-21T19:32:22",
    "order_status": "Delivered",
    "shop_to_delivery_km": 1.977,
    "order_created_at": "2025-07-21T19:11:03",
    "order_accepted_at": "2025-07-21T19:11:10",
    "start_ride_at": "2025-07-21T19:11:22",
    "reached_shop_at": "2025-07-21T19:22:07",
    "order_picked_at": "2025-07-21T19:26:36",
    "shipped_at": "2025-07-21T19:31:23",
    "reached_dest_at": "2025-07-21T19:32:18",
    "final_status_at": "2025-07-21T19:32:22",
    "cancellation_reason": "0"
  }
]
2025-10-06 14:19:26 INFO: data from database stored successfully
2025-10-06 14:19:26 INFO: Database query executed successfully
2025-10-06 14:19:27 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:19:28 INFO: context stored successfully
2025-10-06 14:19:28 INFO: context stored successfully
2025-10-06 14:19:28 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:19:28 INFO: 127.0.0.1 - - [06/Oct/2025 14:19:28] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:19:43 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM.--------------------------------------------------------------------------
2025-10-06 14:19:43 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:19:43 INFO: context fetched successfully
2025-10-06 14:19:43 INFO: Context retrieved: [{'role': 'user', 'content': 'What is the final status timestamp of my last order?'}, {'role': 'user', 'content': 'Which of my orders are still in Cancel Request Accepted status?'}, {'role': 'assistant', 'content': 'Order ID 1823178 is in "Cancel Request Accepted" status.'}, {'role': 'user', 'content': 'Can you show me orders delivered between July 20 and July 25?'}, {'role': 'assistant', 'content': 'Order ID 1823358 was delivered on July 21, 2025, at 7:32 PM.'}]
2025-10-06 14:19:50 INFO: intent classified
2025-10-06 14:19:50 INFO: data_fetch
2025-10-06 14:19:50 INFO: Classified intent: data_fetch
2025-10-06 14:19:50 INFO: Started SQL generation
2025-10-06 14:19:51 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:19:52 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at") >= 19 AND "start_ride_at" >= INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 14:19:52 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at") >= 19 AND "start_ride_at" >= INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 14:19:53 ERROR: Database error: operator does not exist: timestamp without time zone >= interval
LINE 1: ...R FROM "start_ride_at") >= 19 AND "start_ride_at" >= INTERVA...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

2025-10-06 14:19:53 ERROR: Database query execution failure
2025-10-06 14:19:53 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:19:54 INFO: context stored successfully
2025-10-06 14:19:54 INFO: context stored successfully
2025-10-06 14:19:54 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:19:54 INFO: 127.0.0.1 - - [06/Oct/2025 14:19:54] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:20:43 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM..--------------------------------------------------------------------------
2025-10-06 14:20:43 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:20:43 INFO: context fetched successfully
2025-10-06 14:20:43 INFO: Context retrieved: [{'role': 'user', 'content': 'Which of my orders are still in Cancel Request Accepted status?'}, {'role': 'user', 'content': 'Can you show me orders delivered between July 20 and July 25?'}, {'role': 'assistant', 'content': 'Order ID 1823358 was delivered on July 21, 2025, at 7:32 PM.'}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM.'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 14:20:45 INFO: intent classified
2025-10-06 14:20:45 INFO: data_fetch
2025-10-06 14:20:45 INFO: Classified intent: data_fetch
2025-10-06 14:20:45 INFO: Started SQL generation
2025-10-06 14:20:48 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:20:49 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at") >= 19 AND "start_ride_at" IS NOT NULL ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 14:20:49 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at") >= 19 AND "start_ride_at" IS NOT NULL ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 14:20:49 INFO: Database fetching successful: [
  {
    "id": 1823358,
    "customer_number": 4663190680,
    "customer_name": "Customer_QWO",
    "client_id": 265,
    "client_name": "Dominos Pizza",
    "captain_name": "Hafez Yahya - JED - JOD11",
    "delivery_date": "2025-07-21T19:32:22",
    "order_status": "Delivered",
    "shop_to_delivery_km": 1.977,
    "order_created_at": "2025-07-21T19:11:03",
    "order_accepted_at": "2025-07-21T19:11:10",
    "start_ride_at": "2025-07-21T19:11:22",
    "reached_shop_at": "2025-07-21T19:22:07",
    "order_picked_at": "2025-07-21T19:26:36",
    "shipped_at": "2025-07-21T19:31:23",
    "reached_dest_at": "2025-07-21T19:32:18",
    "final_status_at": "2025-07-21T19:32:22",
    "cancellation_reason": "0"
  }
]
2025-10-06 14:20:49 INFO: data from database stored successfully
2025-10-06 14:20:49 INFO: Database query executed successfully
2025-10-06 14:20:50 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:20:51 INFO: context stored successfully
2025-10-06 14:20:51 INFO: context stored successfully
2025-10-06 14:20:51 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:20:51 INFO: 127.0.0.1 - - [06/Oct/2025 14:20:51] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:21:05 INFO: --------------------------------------------------------------------------Received user message: Can you show me orders delivered between July 20 and July 25?--------------------------------------------------------------------------
2025-10-06 14:21:05 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:21:05 INFO: context fetched successfully
2025-10-06 14:21:05 INFO: Context retrieved: [{'role': 'user', 'content': 'Can you show me orders delivered between July 20 and July 25?'}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM.'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM..'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 14:21:08 INFO: intent classified
2025-10-06 14:21:08 INFO: data_fetch
2025-10-06 14:21:08 INFO: Classified intent: data_fetch
2025-10-06 14:21:08 INFO: Started SQL generation
2025-10-06 14:21:10 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:21:11 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND "delivery_date" >= '2025-07-20' AND "delivery_date" <= '2025-07-25' ORDER BY "delivery_date" DESC LIMIT 1;
2025-10-06 14:21:11 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_status" = 'Delivered' AND "delivery_date" >= '2025-07-20' AND "delivery_date" <= '2025-07-25' ORDER BY "delivery_date" DESC LIMIT 1;
2025-10-06 14:21:11 INFO: Database fetching successful: [
  {
    "id": 1823358,
    "customer_number": 4663190680,
    "customer_name": "Customer_QWO",
    "client_id": 265,
    "client_name": "Dominos Pizza",
    "captain_name": "Hafez Yahya - JED - JOD11",
    "delivery_date": "2025-07-21T19:32:22",
    "order_status": "Delivered",
    "shop_to_delivery_km": 1.977,
    "order_created_at": "2025-07-21T19:11:03",
    "order_accepted_at": "2025-07-21T19:11:10",
    "start_ride_at": "2025-07-21T19:11:22",
    "reached_shop_at": "2025-07-21T19:22:07",
    "order_picked_at": "2025-07-21T19:26:36",
    "shipped_at": "2025-07-21T19:31:23",
    "reached_dest_at": "2025-07-21T19:32:18",
    "final_status_at": "2025-07-21T19:32:22",
    "cancellation_reason": "0"
  }
]
2025-10-06 14:21:11 INFO: data from database stored successfully
2025-10-06 14:21:11 INFO: Database query executed successfully
2025-10-06 14:21:12 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:21:15 INFO: context stored successfully
2025-10-06 14:21:16 INFO: context stored successfully
2025-10-06 14:21:16 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:21:16 INFO: 127.0.0.1 - - [06/Oct/2025 14:21:16] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:21:45 INFO: --------------------------------------------------------------------------Received user message: Show me orders that reached the destination after 19:35.--------------------------------------------------------------------------
2025-10-06 14:21:45 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:21:45 INFO: context fetched successfully
2025-10-06 14:21:45 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM.'}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM..'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Can you show me orders delivered between July 20 and July 25?'}, {'role': 'assistant', 'content': '"client_name": "Dominos Pizza",  \n"order_status": "Delivered",  \n"delivery_date": "2025-07-21T19:32:22",  \n"customer_number": 4663190680,  \n"customer_name": "Customer_QWO"'}]
2025-10-06 14:21:46 INFO: intent classified
2025-10-06 14:21:46 INFO: data_fetch
2025-10-06 14:21:46 INFO: Classified intent: data_fetch
2025-10-06 14:21:46 INFO: Started SQL generation
2025-10-06 14:21:47 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:21:48 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND CAST("reached_dest_at" AS time) >= '19:35:00' AND "reached_dest_at" >= INTERVAL '0 seconds' ORDER BY "reached_dest_at" DESC LIMIT 1;
2025-10-06 14:21:48 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND CAST("reached_dest_at" AS time) >= '19:35:00' AND "reached_dest_at" >= INTERVAL '0 seconds' ORDER BY "reached_dest_at" DESC LIMIT 1;
2025-10-06 14:21:49 ERROR: Database error: operator does not exist: timestamp without time zone >= interval
LINE 1: ..._at" AS time) >= '19:35:00' AND "reached_dest_at" >= INTERVA...
                                                             ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

2025-10-06 14:21:49 ERROR: Database query execution failure
2025-10-06 14:21:50 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:21:51 INFO: context stored successfully
2025-10-06 14:21:51 INFO: context stored successfully
2025-10-06 14:21:51 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:21:51 INFO: 127.0.0.1 - - [06/Oct/2025 14:21:51] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:24:13 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\prompts.py', reloading
2025-10-06 14:24:13 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\prompts.py', reloading
2025-10-06 14:24:13 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\prompts.py', reloading
2025-10-06 14:24:14 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 14:24:23 WARNING:  * Debugger is active!
2025-10-06 14:24:23 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:24:23 INFO: --------------------------------------------------------------------------Received user message: Show me orders that reached the destination after 19:35.--------------------------------------------------------------------------
2025-10-06 14:24:23 INFO: Session ID: a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:24:24 INFO: context fetched successfully
2025-10-06 14:24:24 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM..'}, {'role': 'user', 'content': 'Can you show me orders delivered between July 20 and July 25?'}, {'role': 'assistant', 'content': '"client_name": "Dominos Pizza",  \n"order_status": "Delivered",  \n"delivery_date": "2025-07-21T19:32:22",  \n"customer_number": 4663190680,  \n"customer_name": "Customer_QWO"'}, {'role': 'user', 'content': 'Show me orders that reached the destination after 19:35.'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 14:24:26 INFO: intent classified
2025-10-06 14:24:26 INFO: data_fetch
2025-10-06 14:24:26 INFO: Classified intent: data_fetch
2025-10-06 14:24:26 INFO: Started SQL generation
2025-10-06 14:24:30 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:24:32 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND CAST("reached_dest_at" AS TIME) > TIME '19:35:00' AND "reached_dest_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "reached_dest_at" DESC LIMIT 1;
2025-10-06 14:24:32 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND CAST("reached_dest_at" AS TIME) > TIME '19:35:00' AND "reached_dest_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "reached_dest_at" DESC LIMIT 1;
2025-10-06 14:24:32 INFO: Database fetching successful: []
2025-10-06 14:24:32 INFO: data from database stored successfully
2025-10-06 14:24:32 INFO: Database query executed successfully
2025-10-06 14:24:33 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:24:33 INFO: context stored successfully
2025-10-06 14:24:33 INFO: context stored successfully
2025-10-06 14:24:33 INFO: Context stored for session a91ba48d-2c38-4afa-bc3b-4456ff0b01fa
2025-10-06 14:24:33 INFO: 127.0.0.1 - - [06/Oct/2025 14:24:33] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:24:43 INFO: 127.0.0.1 - - [06/Oct/2025 14:24:43] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-10-06 14:24:57 INFO: 127.0.0.1 - - [06/Oct/2025 14:24:57] "GET / HTTP/1.1" 200 -
2025-10-06 14:24:57 INFO: 127.0.0.1 - - [06/Oct/2025 14:24:57] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 14:24:57 INFO: 127.0.0.1 - - [06/Oct/2025 14:24:57] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-10-06 14:24:59 INFO: New session started: 7947aed9-bfac-4a31-a9c9-77d1643eb181
2025-10-06 14:24:59 INFO: Received request data: {'mobile': '919562301314'}
2025-10-06 14:24:59 INFO: Updated mobile: 919562301314
2025-10-06 14:25:05 INFO: Updated name: Dominos Pizza
2025-10-06 14:25:05 INFO: 127.0.0.1 - - [06/Oct/2025 14:25:05] "POST /number HTTP/1.1" 200 -
2025-10-06 14:25:05 INFO: 127.0.0.1 - - [06/Oct/2025 14:25:05] "POST /names HTTP/1.1" 200 -
2025-10-06 14:25:07 INFO: --------------------------------------------------------------------------Received user message: Show me orders that reached the destination after 19:35.--------------------------------------------------------------------------
2025-10-06 14:25:07 INFO: Session ID: 7947aed9-bfac-4a31-a9c9-77d1643eb181
2025-10-06 14:25:07 INFO: context fetched successfully
2025-10-06 14:25:07 INFO: Context retrieved: []
2025-10-06 14:25:11 INFO: intent classified
2025-10-06 14:25:11 INFO: data_fetch
2025-10-06 14:25:11 INFO: Classified intent: data_fetch
2025-10-06 14:25:11 INFO: Started SQL generation
2025-10-06 14:25:15 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:25:17 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND CAST("reached_dest_at" AS TIME) > TIME '19:35:00' AND "reached_dest_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "reached_dest_at" DESC LIMIT 1;
2025-10-06 14:25:17 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND CAST("reached_dest_at" AS TIME) > TIME '19:35:00' AND "reached_dest_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "reached_dest_at" DESC LIMIT 1;
2025-10-06 14:25:18 INFO: Database fetching successful: []
2025-10-06 14:25:18 INFO: data from database stored successfully
2025-10-06 14:25:18 INFO: Database query executed successfully
2025-10-06 14:25:19 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:25:21 INFO: context stored successfully
2025-10-06 14:25:21 INFO: context stored successfully
2025-10-06 14:25:21 INFO: Context stored for session 7947aed9-bfac-4a31-a9c9-77d1643eb181
2025-10-06 14:25:21 INFO: 127.0.0.1 - - [06/Oct/2025 14:25:21] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:25:54 INFO: --------------------------------------------------------------------------Received user message: Can I get the most recent 5 orders based on order_created_at?--------------------------------------------------------------------------
2025-10-06 14:25:54 INFO: Session ID: 7947aed9-bfac-4a31-a9c9-77d1643eb181
2025-10-06 14:25:54 INFO: context fetched successfully
2025-10-06 14:25:54 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me orders that reached the destination after 19:35.'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 14:25:56 INFO: intent classified
2025-10-06 14:25:56 INFO: data_fetch
2025-10-06 14:25:56 INFO: Classified intent: data_fetch
2025-10-06 14:25:56 INFO: Started SQL generation
2025-10-06 14:25:58 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:25:59 INFO: Generated SQL query: SELECT "id", "order_created_at", "order_status", "customer_name", "captain_name" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 14:25:59 INFO: SQL generation success: SELECT "id", "order_created_at", "order_status", "customer_name", "captain_name" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 14:26:00 INFO: Database fetching successful: []
2025-10-06 14:26:00 INFO: data from database stored successfully
2025-10-06 14:26:00 INFO: Database query executed successfully
2025-10-06 14:26:01 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:26:01 INFO: context stored successfully
2025-10-06 14:26:01 INFO: context stored successfully
2025-10-06 14:26:01 INFO: Context stored for session 7947aed9-bfac-4a31-a9c9-77d1643eb181
2025-10-06 14:26:01 INFO: 127.0.0.1 - - [06/Oct/2025 14:26:01] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:26:21 INFO: --------------------------------------------------------------------------Received user message: Can I get the most recent 5 orders based on order_created_at?
in july--------------------------------------------------------------------------
2025-10-06 14:26:21 INFO: Session ID: 7947aed9-bfac-4a31-a9c9-77d1643eb181
2025-10-06 14:26:22 INFO: context fetched successfully
2025-10-06 14:26:22 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me orders that reached the destination after 19:35.'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Can I get the most recent 5 orders based on order_created_at?'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 14:26:23 INFO: intent classified
2025-10-06 14:26:23 INFO: data_fetch
2025-10-06 14:26:23 INFO: Classified intent: data_fetch
2025-10-06 14:26:23 INFO: Started SQL generation
2025-10-06 14:26:26 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:26:27 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 14:26:27 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 14:26:30 INFO: Database fetching successful: [
  {
    "id": 1823358,
    "customer_number": 4663190680,
    "customer_name": "Customer_QWO",
    "client_id": 265,
    "client_name": "Dominos Pizza",
    "captain_name": "Hafez Yahya - JED - JOD11",
    "delivery_date": "2025-07-21T19:32:22",
    "order_status": "Delivered",
    "shop_to_delivery_km": 1.977,
    "order_created_at": "2025-07-21T19:11:03",
    "order_accepted_at": "2025-07-21T19:11:10",
    "start_ride_at": "2025-07-21T19:11:22",
    "reached_shop_at": "2025-07-21T19:22:07",
    "order_picked_at": "2025-07-21T19:26:36",
    "shipped_at": "2025-07-21T19:31:23",
    "reached_dest_at": "2025-07-21T19:32:18",
    "final_status_at": "2025-07-21T19:32:22",
    "cancellation_reason": "0"
  }
]
2025-10-06 14:26:30 INFO: data from database stored successfully
2025-10-06 14:26:30 INFO: Database query executed successfully
2025-10-06 14:26:30 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:26:31 INFO: context stored successfully
2025-10-06 14:26:31 INFO: context stored successfully
2025-10-06 14:26:31 INFO: Context stored for session 7947aed9-bfac-4a31-a9c9-77d1643eb181
2025-10-06 14:26:31 INFO: 127.0.0.1 - - [06/Oct/2025 14:26:31] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:26:50 INFO: 127.0.0.1 - - [06/Oct/2025 14:26:50] "GET / HTTP/1.1" 200 -
2025-10-06 14:26:50 INFO: 127.0.0.1 - - [06/Oct/2025 14:26:50] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 14:26:52 INFO: New session started: feeee641-db43-4c35-a091-31c137816dcb
2025-10-06 14:26:52 INFO: Received request data: {'mobile': '919562301314'}
2025-10-06 14:26:52 INFO: Updated mobile: 919562301314
2025-10-06 14:26:53 INFO: Updated name: Dominos Pizza
2025-10-06 14:26:53 INFO: 127.0.0.1 - - [06/Oct/2025 14:26:53] "POST /number HTTP/1.1" 200 -
2025-10-06 14:26:53 INFO: 127.0.0.1 - - [06/Oct/2025 14:26:53] "POST /names HTTP/1.1" 200 -
2025-10-06 14:26:55 INFO: --------------------------------------------------------------------------Received user message: Can I get the most recent 5 orders based on order_created_at? in july--------------------------------------------------------------------------
2025-10-06 14:26:55 INFO: Session ID: feeee641-db43-4c35-a091-31c137816dcb
2025-10-06 14:26:55 INFO: context fetched successfully
2025-10-06 14:26:55 INFO: Context retrieved: []
2025-10-06 14:26:58 INFO: intent classified
2025-10-06 14:26:58 INFO: data_fetch
2025-10-06 14:26:58 INFO: Classified intent: data_fetch
2025-10-06 14:26:58 INFO: Started SQL generation
2025-10-06 14:27:01 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:27:02 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 14:27:02 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 14:27:03 INFO: Database fetching successful: [
  {
    "id": 1823358,
    "customer_number": 4663190680,
    "customer_name": "Customer_QWO",
    "client_id": 265,
    "client_name": "Dominos Pizza",
    "captain_name": "Hafez Yahya - JED - JOD11",
    "delivery_date": "2025-07-21T19:32:22",
    "order_status": "Delivered",
    "shop_to_delivery_km": 1.977,
    "order_created_at": "2025-07-21T19:11:03",
    "order_accepted_at": "2025-07-21T19:11:10",
    "start_ride_at": "2025-07-21T19:11:22",
    "reached_shop_at": "2025-07-21T19:22:07",
    "order_picked_at": "2025-07-21T19:26:36",
    "shipped_at": "2025-07-21T19:31:23",
    "reached_dest_at": "2025-07-21T19:32:18",
    "final_status_at": "2025-07-21T19:32:22",
    "cancellation_reason": "0"
  }
]
2025-10-06 14:27:03 INFO: data from database stored successfully
2025-10-06 14:27:03 INFO: Database query executed successfully
2025-10-06 14:27:04 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 14:27:05 INFO: context stored successfully
2025-10-06 14:27:05 INFO: context stored successfully
2025-10-06 14:27:05 INFO: Context stored for session feeee641-db43-4c35-a091-31c137816dcb
2025-10-06 14:27:05 INFO: 127.0.0.1 - - [06/Oct/2025 14:27:05] "POST /process-data HTTP/1.1" 200 -
2025-10-06 14:29:12 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 14:29:13 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 14:29:19 WARNING:  * Debugger is active!
2025-10-06 14:29:19 INFO:  * Debugger PIN: 115-265-433
2025-10-06 14:59:16 INFO: 127.0.0.1 - - [06/Oct/2025 14:59:16] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-10-06 15:00:27 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 15:00:27 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 15:00:27 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 15:00:28 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 15:00:35 WARNING:  * Debugger is active!
2025-10-06 15:00:35 INFO:  * Debugger PIN: 115-265-433
2025-10-06 15:00:40 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 15:00:40 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 15:00:41 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 15:00:47 WARNING:  * Debugger is active!
2025-10-06 15:00:47 INFO:  * Debugger PIN: 115-265-433
2025-10-06 15:00:47 INFO: --------------------------------------------------------------------------Received user message: Can I get the most recent 5 orders based on order_created_at? in july--------------------------------------------------------------------------
2025-10-06 15:00:47 INFO: Session ID: feeee641-db43-4c35-a091-31c137816dcb
2025-10-06 15:00:48 INFO: context fetched successfully
2025-10-06 15:00:48 INFO: Context retrieved: [{'role': 'user', 'content': 'Can I get the most recent 5 orders based on order_created_at? in july'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 15:00:49 INFO: intent classified
2025-10-06 15:00:49 INFO: data_fetch
2025-10-06 15:00:49 INFO: Classified intent: data_fetch
2025-10-06 15:00:49 INFO: Started SQL generation
2025-10-06 15:00:54 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 15:00:55 INFO: Generated SQL query: SELECT "id", "order_created_at", "order_status" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 15:00:55 INFO: SQL generation success: SELECT "id", "order_created_at", "order_status" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 15:00:56 INFO: Database fetching successful: [
  {
    "id": 1823358,
    "order_created_at": "2025-07-21T19:11:03",
    "order_status": "Delivered"
  }
]
2025-10-06 15:00:56 INFO: data from database stored successfully
2025-10-06 15:00:56 INFO: Database query executed successfully
2025-10-06 15:00:57 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 15:01:01 INFO: Sorry, we couldn't find the data you are looking for.
2025-10-06 15:01:01 INFO: context stored successfully
2025-10-06 15:01:01 INFO: context stored successfully
2025-10-06 15:01:01 INFO: Context stored for session feeee641-db43-4c35-a091-31c137816dcb
2025-10-06 15:01:01 INFO: 127.0.0.1 - - [06/Oct/2025 15:01:01] "POST /process-data HTTP/1.1" 200 -
2025-10-06 15:01:15 INFO: 127.0.0.1 - - [06/Oct/2025 15:01:15] "GET / HTTP/1.1" 200 -
2025-10-06 15:01:15 INFO: 127.0.0.1 - - [06/Oct/2025 15:01:15] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 15:01:18 INFO: New session started: 6ac65785-d9d0-4f75-a8e5-815625c0b1f4
2025-10-06 15:01:18 INFO: Received request data: {'mobile': '919562301314'}
2025-10-06 15:01:18 INFO: Updated mobile: 919562301314
2025-10-06 15:01:19 INFO: Updated name: Dominos Pizza
2025-10-06 15:01:19 INFO: 127.0.0.1 - - [06/Oct/2025 15:01:19] "POST /number HTTP/1.1" 200 -
2025-10-06 15:01:19 INFO: 127.0.0.1 - - [06/Oct/2025 15:01:19] "POST /names HTTP/1.1" 200 -
2025-10-06 15:01:21 INFO: --------------------------------------------------------------------------Received user message: Can I get the most recent 5 orders based on order_created_at? in july--------------------------------------------------------------------------
2025-10-06 15:01:21 INFO: Session ID: 6ac65785-d9d0-4f75-a8e5-815625c0b1f4
2025-10-06 15:01:21 INFO: context fetched successfully
2025-10-06 15:01:21 INFO: Context retrieved: []
2025-10-06 15:01:25 INFO: intent classified
2025-10-06 15:01:25 INFO: data_fetch
2025-10-06 15:01:25 INFO: Classified intent: data_fetch
2025-10-06 15:01:25 INFO: Started SQL generation
2025-10-06 15:01:29 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 15:01:31 INFO: Generated SQL query: SELECT "id", "order_created_at", "order_status", "customer_name", "captain_name" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 15:01:31 INFO: SQL generation success: SELECT "id", "order_created_at", "order_status", "customer_name", "captain_name" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND "order_created_at" >= '2025-07-01' AND "order_created_at" < '2025-08-01' ORDER BY "order_created_at" DESC LIMIT 1;
2025-10-06 15:01:31 INFO: Database fetching successful: [
  {
    "id": 1823358,
    "order_created_at": "2025-07-21T19:11:03",
    "order_status": "Delivered",
    "customer_name": "Customer_QWO",
    "captain_name": "Hafez Yahya - JED - JOD11"
  }
]
2025-10-06 15:01:31 INFO: data from database stored successfully
2025-10-06 15:01:31 INFO: Database query executed successfully
2025-10-06 15:01:33 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 15:01:39 INFO: Sorry, we couldn't find the data you are looking for.
2025-10-06 15:01:39 INFO: context stored successfully
2025-10-06 15:01:39 INFO: context stored successfully
2025-10-06 15:01:39 INFO: Context stored for session 6ac65785-d9d0-4f75-a8e5-815625c0b1f4
2025-10-06 15:01:39 INFO: 127.0.0.1 - - [06/Oct/2025 15:01:39] "POST /process-data HTTP/1.1" 200 -
2025-10-06 17:42:37 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-06 17:42:37 INFO: [33mPress CTRL+C to quit[0m
2025-10-06 17:42:37 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 17:42:52 WARNING:  * Debugger is active!
2025-10-06 17:42:52 INFO:  * Debugger PIN: 115-265-433
2025-10-06 17:42:53 INFO: 127.0.0.1 - - [06/Oct/2025 17:42:53] "GET / HTTP/1.1" 200 -
2025-10-06 17:42:53 INFO: 127.0.0.1 - - [06/Oct/2025 17:42:53] "[33mGET /images/image.png HTTP/1.1[0m" 404 -
2025-10-06 17:42:56 INFO: New session started: 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 17:42:56 INFO: Received request data: {'mobile': '919562301314'}
2025-10-06 17:42:56 INFO: Updated mobile: 919562301314
2025-10-06 17:42:57 INFO: Updated name: Dominos Pizza
2025-10-06 17:42:57 INFO: 127.0.0.1 - - [06/Oct/2025 17:42:57] "POST /number HTTP/1.1" 200 -
2025-10-06 17:42:58 INFO: 127.0.0.1 - - [06/Oct/2025 17:42:58] "POST /names HTTP/1.1" 200 -
2025-10-06 17:43:03 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM--------------------------------------------------------------------------
2025-10-06 17:43:03 INFO: Session ID: 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 17:43:04 INFO: context fetched successfully
2025-10-06 17:43:04 INFO: Context retrieved: []
2025-10-06 17:43:05 INFO: intent classified
2025-10-06 17:43:05 INFO: data_fetch
2025-10-06 17:43:05 INFO: Classified intent: data_fetch
2025-10-06 17:43:05 INFO: Started SQL generation
2025-10-06 17:43:10 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 17:43:12 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 17:43:12 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 17:43:12 INFO: Database fetching successful: []
2025-10-06 17:43:12 INFO: data from database stored successfully
2025-10-06 17:43:12 INFO: Database query executed successfully
2025-10-06 17:43:14 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 17:43:14 INFO: Sorry, we couldn't find the data you are looking for.
2025-10-06 17:43:14 INFO: context stored successfully
2025-10-06 17:43:14 INFO: context stored successfully
2025-10-06 17:43:14 INFO: Context stored for session 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 17:43:14 INFO: 127.0.0.1 - - [06/Oct/2025 17:43:14] "POST /process-data HTTP/1.1" 200 -
2025-10-06 17:43:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 17:43:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 17:43:53 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 17:44:02 WARNING:  * Debugger is active!
2025-10-06 17:44:02 INFO:  * Debugger PIN: 115-265-433
2025-10-06 17:44:03 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM--------------------------------------------------------------------------
2025-10-06 17:44:03 INFO: Session ID: 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 17:44:04 INFO: context fetched successfully
2025-10-06 17:44:04 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 17:44:06 INFO: intent classified
2025-10-06 17:44:06 INFO: data_fetch
2025-10-06 17:44:06 INFO: Classified intent: data_fetch
2025-10-06 17:44:06 INFO: Started SQL generation
2025-10-06 17:44:11 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 17:44:12 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 17:44:12 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 17:44:13 INFO: Database fetching successful: []
2025-10-06 17:44:13 INFO: data from database stored successfully
2025-10-06 17:44:13 INFO: Database query executed successfully
2025-10-06 17:44:14 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 17:44:14 INFO: Sorry, we couldn't find the data you are looking for.
2025-10-06 17:44:14 INFO: context stored successfully
2025-10-06 17:44:14 INFO: context stored successfully
2025-10-06 17:44:14 INFO: Context stored for session 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 17:44:14 INFO: 127.0.0.1 - - [06/Oct/2025 17:44:14] "POST /process-data HTTP/1.1" 200 -
2025-10-06 17:45:02 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 17:45:02 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 17:45:02 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 17:45:03 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 17:45:10 WARNING:  * Debugger is active!
2025-10-06 17:45:10 INFO:  * Debugger PIN: 115-265-433
2025-10-06 17:45:17 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM--------------------------------------------------------------------------
2025-10-06 17:45:17 INFO: Session ID: 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 17:45:18 INFO: context fetched successfully
2025-10-06 17:45:18 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 17:45:19 INFO: intent classified
2025-10-06 17:45:19 INFO: data_fetch
2025-10-06 17:45:19 INFO: Classified intent: data_fetch
2025-10-06 17:45:19 INFO: Started SQL generation
2025-10-06 17:45:21 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 17:45:22 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at") >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 17:45:22 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at") >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 17:45:23 INFO: Database fetching successful: []
2025-10-06 17:45:23 INFO: data from database stored successfully
2025-10-06 17:45:23 INFO: Database query executed successfully
2025-10-06 17:45:25 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 17:45:25 INFO: Sorry, we couldn't find the data you are looking for.
2025-10-06 17:45:25 INFO: 127.0.0.1 - - [06/Oct/2025 17:45:25] "POST /process-data HTTP/1.1" 200 -
2025-10-06 18:00:30 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 18:00:30 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 18:00:37 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 18:00:57 WARNING:  * Debugger is active!
2025-10-06 18:00:57 INFO:  * Debugger PIN: 115-265-433
2025-10-06 18:03:37 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\numpy\\_typing\\__init__.py', reloading
2025-10-06 18:03:37 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\numpy\\_typing\\_nbit_base.py', reloading
2025-10-06 18:03:39 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 18:03:49 WARNING:  * Debugger is active!
2025-10-06 18:03:49 INFO:  * Debugger PIN: 115-265-433
2025-10-06 18:03:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 18:03:53 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\function.py', reloading
2025-10-06 18:03:55 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 18:04:05 WARNING:  * Debugger is active!
2025-10-06 18:04:05 INFO:  * Debugger PIN: 115-265-433
2025-10-06 18:04:19 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\numpy\\_typing\\_shape.py', reloading
2025-10-06 18:04:19 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\numpy\\_utils\\__init__.py', reloading
2025-10-06 18:04:21 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 18:04:31 WARNING:  * Debugger is active!
2025-10-06 18:04:31 INFO:  * Debugger PIN: 115-265-433
2025-10-06 18:04:37 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM--------------------------------------------------------------------------
2025-10-06 18:04:37 INFO: Session ID: 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 18:04:39 INFO: context fetched successfully
2025-10-06 18:04:39 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 18:04:41 INFO: intent classified
2025-10-06 18:04:41 INFO: data_fetch
2025-10-06 18:04:41 INFO: Classified intent: data_fetch
2025-10-06 18:04:41 INFO: Started SQL generation
2025-10-06 18:04:49 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 18:04:50 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at") >= 19 LIMIT 1;
2025-10-06 18:04:50 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at") >= 19 LIMIT 1;
2025-10-06 18:04:53 INFO: Database fetching successful: [
  {
    "id": 1757797,
    "customer_number": 2382551192,
    "customer_name": "Customer_IEY",
    "client_id": 265,
    "client_name": "Dominos Pizza",
    "captain_name": "Md Jabed hossen -RUH - ASFOUR12",
    "delivery_date": "2025-06-28T00:00:12",
    "order_status": "Delivered",
    "shop_to_delivery_km": 1.073,
    "order_created_at": "2025-06-27T23:27:40",
    "order_accepted_at": "2025-06-27T23:36:22",
    "start_ride_at": "2025-06-27T23:36:37",
    "reached_shop_at": "2025-06-27T23:48:36",
    "order_picked_at": "2025-06-27T23:51:00",
    "shipped_at": "2025-06-27T23:51:03",
    "reached_dest_at": "2025-06-28T00:00:10",
    "final_status_at": "2025-06-28T00:00:12",
    "cancellation_reason": "0"
  }
]
2025-10-06 18:04:53 INFO: data from database stored successfully
2025-10-06 18:04:53 INFO: Database query executed successfully
2025-10-06 18:04:54 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 18:04:55 INFO: Sorry, we couldn't find the data you are looking for.
2025-10-06 18:04:55 INFO: 127.0.0.1 - - [06/Oct/2025 18:04:55] "POST /process-data HTTP/1.1" 200 -
2025-10-06 18:05:12 INFO:  * Detected change in 'C:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py', reloading
2025-10-06 18:05:14 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 18:05:23 WARNING:  * Debugger is active!
2025-10-06 18:05:23 INFO:  * Debugger PIN: 115-265-433
2025-10-06 18:05:24 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM--------------------------------------------------------------------------
2025-10-06 18:05:24 INFO: Session ID: 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 18:05:25 INFO: context fetched successfully
2025-10-06 18:05:25 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 18:05:26 INFO: intent classified
2025-10-06 18:05:26 INFO: data_fetch
2025-10-06 18:05:26 INFO: Classified intent: data_fetch
2025-10-06 18:05:26 INFO: Started SQL generation
2025-10-06 18:05:28 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 18:05:29 INFO: Generated SQL query: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 18:05:29 INFO: SQL generation success: SELECT * FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' ORDER BY "start_ride_at" DESC LIMIT 1;
2025-10-06 18:05:30 INFO: Database fetching successful: []
2025-10-06 18:05:31 INFO: data from database stored successfully
2025-10-06 18:05:31 INFO: Database query executed successfully
2025-10-06 18:05:32 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 18:05:32 INFO: Sorry, we couldn't find the data you are looking for.
2025-10-06 18:05:32 INFO: 127.0.0.1 - - [06/Oct/2025 18:05:32] "POST /process-data HTTP/1.1" 200 -
2025-10-06 18:07:21 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 18:07:21 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 18:07:21 INFO:  * Detected change in 'C:\\Users\\USER\\Desktop\\LEAJLAK\\beta\\patch3\\ai-assistant\\app.py', reloading
2025-10-06 18:07:23 INFO:  * Restarting with watchdog (windowsapi)
2025-10-06 18:07:32 WARNING:  * Debugger is active!
2025-10-06 18:07:32 INFO:  * Debugger PIN: 115-265-433
2025-10-06 18:07:32 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM--------------------------------------------------------------------------
2025-10-06 18:07:32 INFO: Session ID: 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 18:07:34 INFO: context fetched successfully
2025-10-06 18:07:34 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 18:07:36 INFO: intent classified
2025-10-06 18:07:36 INFO: data_fetch
2025-10-06 18:07:36 INFO: Classified intent: data_fetch
2025-10-06 18:07:36 INFO: Started SQL generation
2025-10-06 18:07:41 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 18:07:42 INFO: Generated SQL query: SELECT "id", "start_ride_at" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' LIMIT 1;
2025-10-06 18:07:42 INFO: SQL generation success: SELECT "id", "start_ride_at" FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" >= NOW() - INTERVAL '0 seconds' LIMIT 1;
2025-10-06 18:07:43 INFO: Database fetching successful: []
2025-10-06 18:07:43 INFO: data from database stored successfully
2025-10-06 18:07:43 INFO: Database query executed successfully
2025-10-06 18:07:44 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 18:07:44 INFO: Sorry, we couldn't find the data you are looking for.
2025-10-06 18:07:44 INFO: Conversation appended to data/conversations.xlsx
2025-10-06 18:07:44 INFO: 127.0.0.1 - - [06/Oct/2025 18:07:44] "POST /process-data HTTP/1.1" 200 -
2025-10-06 18:08:01 INFO: --------------------------------------------------------------------------Received user message: Show me the orders that started their ride after 7 PM--------------------------------------------------------------------------
2025-10-06 18:08:01 INFO: Session ID: 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 18:08:02 INFO: context fetched successfully
2025-10-06 18:08:02 INFO: Context retrieved: [{'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}, {'role': 'user', 'content': 'Show me the orders that started their ride after 7 PM'}, {'role': 'assistant', 'content': "Sorry, we couldn't find the data you are looking for."}]
2025-10-06 18:08:04 INFO: intent classified
2025-10-06 18:08:04 INFO: data_fetch
2025-10-06 18:08:04 INFO: Classified intent: data_fetch
2025-10-06 18:08:04 INFO: Started SQL generation
2025-10-06 18:08:06 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 18:08:07 INFO: Generated SQL query: SELECT "id", "start_ride_at", "order_status", EXTRACT(HOUR FROM "start_ride_at"::time) AS hour FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" <= NOW() LIMIT 1;
2025-10-06 18:08:07 INFO: SQL generation success: SELECT "id", "start_ride_at", "order_status", EXTRACT(HOUR FROM "start_ride_at"::time) AS hour FROM "updated_table" WHERE "client_name" = 'Dominos Pizza' AND EXTRACT(HOUR FROM "start_ride_at"::time) >= 19 AND "start_ride_at" <= NOW() LIMIT 1;
2025-10-06 18:08:11 INFO: Database fetching successful: [
  {
    "id": 1757797,
    "start_ride_at": "2025-06-27T23:36:37",
    "order_status": "Delivered",
    "hour": 23.0
  }
]
2025-10-06 18:08:11 INFO: data from database stored successfully
2025-10-06 18:08:11 INFO: Database query executed successfully
2025-10-06 18:08:13 INFO: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-06 18:08:15 INFO:     "id": 1757797,
    "start_ride_at": "2025-06-27T23:36:37",
    "order_status": "Delivered"
2025-10-06 18:08:15 INFO: Conversation appended to data/conversations.xlsx
2025-10-06 18:08:15 INFO: context stored successfully
2025-10-06 18:08:15 INFO: context stored successfully
2025-10-06 18:08:15 INFO: Context stored for session 3e0b3db3-9613-43ba-98b1-bb4a75ec018c
2025-10-06 18:08:15 INFO: 127.0.0.1 - - [06/Oct/2025 18:08:15] "POST /process-data HTTP/1.1" 200 -
